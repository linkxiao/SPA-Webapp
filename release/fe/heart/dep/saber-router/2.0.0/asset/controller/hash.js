define("saber-router/controller/hash",["require","../URL"],function(require){function e(e,t){if(!o||!e.equal(o)||t.force)i(e,t),o=e}function t(e,t){var r="~";if(!e)e=location.hash.substring(1).split(r)[0];return new s(e,{query:t,base:o,token:r})}function r(e){location.replace("#"+e),a.push(!0)}function n(){if(!a.pop()){var n=location.hash.substring(1),i=t(n);if(e(i,{}),"/"!==n.charAt(0))r(i.toString())}}var i,o,s=require("../URL"),a=[],exports={};return exports.init=function(e){window.addEventListener("hashchange",n,!1),i=e,n()},exports.redirect=function(r,n,i){if(i=i||{},r=t(r,n),e(r,i),!i.silent)location.hash="#"+r.toString()},exports.reset=function(n,i,s){if(s=s||{},n=t(n,i),!o||!o.equal(n)){if(!s.silent)e(n,s);else o=n;r(n.toString())}},exports.dispose=function(){window.removeEventListener("hashchange",n,!1),o=null},exports});