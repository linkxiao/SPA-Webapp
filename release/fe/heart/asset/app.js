!function(){function e(e){return"function"==typeof e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(i,r){function o(e){if(!l)n(i,e),l=!0}function s(e){if(!l)i.reject(e),l=!0}function a(){var n;if(t(r)||e(r))if(n=r.then,e(n))n.call(r,o,s);else n=null;if(!n)i.fulfill(r)}var l;if(p)try{a()}catch(c){if(!l)u(c),i.reject(c)}else a()}function i(e,t,i){return function(r){function o(){var o=i(r);if(o===t)throw new TypeError;n(e,o)}if(p)try{o()}catch(s){u(s),e.reject(s)}else o()}}function r(e,t,n){if(e.status===t)c.nextTick(function(){n(e.data)});else if(t===f.FULFILLED)e.fulfillList.push(n);else if(t===f.REJECTED)e.rejectList.push(n)}function o(e){var t=e.status===f.FULFILLED?e.fulfillList:e.rejectList;if(l(e),t.length)c.nextTick(function(){for(var n;n=t.shift();)n(e.data)})}function s(t,n,o){var s=new c,l=a(s);if(e(n))n=i(s,l,n);else n=function(e){s.fulfill(e)};if(r(t,f.FULFILLED,n),e(o))o=i(s,l,o);else o=function(e){s.reject(e)};return r(t,f.REJECTED,o),l}function a(e){return{then:function(t,n){return s(e,t,n)}}}function l(e){var t=e.status===f.FULFILLED?"resolve":"reject";if(h)c.emit(t,e.data)}function u(e){if(h)c.emit("exception",e)}function c(){this.status=f.PENDING,this.fulfillList=[],this.rejectList=[]}var f={PENDING:0,FULFILLED:1,REJECTED:2},p=!0,h=!1,d=function(){function t(){var e,t=r.length;for(e=0;t>e;e++)r[e]();r.splice(0,e)}var n,i,r=[],o="promise";if("undefined"!=typeof process&&null!==process&&"function"==typeof process.nextTick)n=function(e){return process.nextTick(e)};else if("function"==typeof setImmediate)n=setImmediate;else if(i=window.MutationObserver||window.webKitMutationObserver){var s=new i(function(e){var n=e[0];if(n.attributeName===o)t()}),a=document.createElement("div");s.observe(a,{attributes:!0}),n=function(e){r.push(e),a.setAttribute(o,Date.now?Date.now():(new Date).getTime())}}else if(e(window.postMessage))window.addEventListener("message",function(e){if(e.source===window&&e.data===o)t()},!1),n=function(e){r.push(e),window.postMessage(o,"*")};else n=function(e){setTimeout(e,0)};return n}();if(c.nextTick=d,c.enableGlobalEvent=function(e){e.mixin(this),h=!0},c.disableExceptionCapture=function(){p=!1},c.enableExceptionCapture=function(){p=!0},c.all=function(e){function t(t){return function(n){if(o[t]=n,r++,r>=e.length)i.fulfill(o)}}function n(e){i.reject(e)}if(!Array.isArray(e))e=Array.prototype.slice.call(arguments);var i=new c,r=0,o=[];return e.forEach(function(e,i){e.then(t(i),n)}),i.promise()},c.promise=function(e){var t=new c;return e(t),t.promise()},c.rejected=function(e){return this.promise(function(t){t.reject(e)})},c.fulfilled=function(e){return this.promise(function(t){t.fulfill(e)})},c.resolved=c.fulfilled,c.prototype.fulfill=function(e){if(this.status===f.PENDING)this.data=e,this.status=f.FULFILLED,o(this)},c.prototype.resolve=c.prototype.fulfill,c.prototype.reject=function(e){if(this.status===f.PENDING)this.data=e,this.status=f.REJECTED,o(this)},c.prototype.promise=function(){return a(this)},"object"==typeof exports&&"object"==typeof module)exports=module.exports=c;else if("function"==typeof define&&define.amd)define("saber-promise/promise",[],function(){return c})}(),define("saber-promise",["saber-promise/promise"],function(e){return e}),function(){function e(){}var t=e.prototype;t._getEvents=function(){if(!this._events)this._events={};return this._events},t._getMaxListeners=function(){if(isNaN(this.maxListeners))this.maxListeners=10;return this.maxListeners},t.on=function(e,t){var n=this._getEvents(),i=this._getMaxListeners();n[e]=n[e]||[];var r=n[e].length;if(r>=i&&0!==i)throw new RangeError("Warning: possible Emitter memory leak detected. "+r+" listeners added.");return n[e].push(t),this},t.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return n.listener=t,this.on(e,n),this},t.off=function(e,t){var n=this._getEvents();if(0===arguments.length)return this._events={},this;var i=n[e];if(!i)return this;if(1===arguments.length)return delete n[e],this;for(var r,o=0;o<i.length;o++)if(r=i[o],r===t||r.listener===t){i.splice(o,1);break}return this},t.emit=function(e){for(var t=this._getEvents(),n=t[e],i=[],r=1;r<arguments.length;r++)i.push(arguments[r]);if(n)for(n=n.slice(0),r=0;r<n.length;r++)n[r].apply(this,i);return this},t.listeners=function(e){var t=this._getEvents();return t[e]||[]},t.setMaxListeners=function(e){return this.maxListeners=e,this};var n=Object.keys(t);if(e.mixin=function(e){for(var i,r=0,o=n.length;o>r;r++)i=n[r],e[i]=t[i];return e},"object"==typeof exports&&"object"==typeof module)exports=module.exports=e;else if("function"==typeof define&&define.amd)define("saber-emitter/emitter",[],function(){return e})}(),define("saber-emitter",["saber-emitter/emitter"],function(e){return e}),function(){"use strict";function e(t,i){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,u=s.length;u>l;l++)a[s[l]]=r(a[s[l]],a);if(n)t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0);if(t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),!Event.prototype.stopImmediatePropagation)t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;if("click"===e)r.call(t,e,n.hijacked||n,i);else r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;if("click"===e)r.call(t,e,n.hijacked||(n.hijacked=function(e){if(!e.propagationStopped)n(e)}),i);else r.call(t,e,n,i)};if("function"==typeof t.onclick)o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;if(e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;if(document.activeElement&&document.activeElement!==e)document.activeElement.blur();i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){if(n&&"select"===e.tagName.toLowerCase())return"mousedown";else return"click"},e.prototype.focus=function(e){var t;if(i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type)t=e.value.length,e.setSelectionRange(t,t);else e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}if(t)t.fastClickLastScrollTop=t.scrollTop},e.prototype.getTargetElementFromEventTarget=function(e){if(e.nodeType===Node.TEXT_NODE)return e.parentNode;else return e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}if(this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay)e.preventDefault();return!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;if(Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n)return!0;else return!1},e.prototype.onTouchMove=function(e){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},e.prototype.findControl=function(e){if(void 0!==e.control)return e.control;if(e.htmlFor)return document.getElementById(e.htmlFor);else return e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,s,a,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o)u=e.changedTouches[0],c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent;if(a=c.tagName.toLowerCase(),"label"===a){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c)){if(e.timeStamp-s>100||i&&window.top!==window&&"input"===a)return this.targetElement=null,!1;if(this.focus(c),this.sendClick(c,e),!i||"select"!==a)this.targetElement=null,e.preventDefault();return!1}if(i&&!r)if(l=c.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)return!0;if(!this.needsClick(c))e.preventDefault(),this.sendClick(c,e);return!1},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){if(!this.targetElement)return!0;if(e.forwardedTouchEvent)return!0;if(!e.cancelable)return!0;if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(e.stopImmediatePropagation)e.stopImmediatePropagation();else e.propagationStopped=!0;return e.stopPropagation(),e.preventDefault(),!1}return!0},e.prototype.onClick=function(e){var t;if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===e.target.type&&0===e.detail)return!0;if(t=this.onMouse(e),!t)this.targetElement=null;return t},e.prototype.destroy=function(){var e=this.layer;if(n)e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0);e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])if(n){if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}else return!0;if(s)if(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3)if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}if("none"===e.style.msTouchAction||"manipulation"===e.style.touchAction)return!0;if(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27)if(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))return!0;if("none"===e.style.touchAction||"manipulation"===e.style.touchAction)return!0;else return!1},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("fastclick/fastclick",[],function(){return e});else if("undefined"!=typeof module&&module.exports)module.exports=e.attach,module.exports.FastClick=e;else window.FastClick=e}(),define("fastclick",["fastclick/fastclick"],function(e){return e}),define("saber-lang/extend",[],function(){function e(e,t){for(var n=1,i=arguments.length;i>n;n++)if(t=arguments[n]){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]}else;return e}return e}),define("saber-lang/bind",[],function(){function e(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}}return e}),define("saber-lang/curry",[],function(){function e(e){var t=[].slice.call(arguments,1);return function(){var n=t.concat([].slice.call(arguments));return e.apply(this,n)}}return e}),define("saber-dom/selector",[],function(){var exports={};return exports.g=function(e){if(!e)return null;else return"string"==typeof e?document.getElementById(e):e},exports.query=function(e,t){if("string"!=typeof e)return e;else return t=t||document.body,t.querySelector(e)},exports.queryAll=function(e,t){if(Array.isArray(e))return e;t=t||document.body;var n=t.querySelectorAll(e);return Array.prototype.slice.call(n)},exports.matches=function(e,t){var n=Element.prototype,i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;if(i)return i.call(e,t);for(var r=exports.queryAll(t,e.parentNode),o=0;o<r.length;o++)if(r[o]===e)return!0;return!1},exports}),define("saber-dom/css",[],function(){function e(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function t(t){if("-"!==t.charAt(0)){var n=i.style,o=e(t);if(!(o in n)){o=o.charAt(0).toUpperCase()+o.substring(1);for(var s,a=0;s=r[a];a++)if(s+o in n){t="-"+s+"-"+t;break}}}return t}var exports={},n=document.defaultView.getComputedStyle,i=document.createElement("div"),r=["webkit","ms","o"];return exports.getStyle=function(i,r){return r=t(r),i.style[e(r)]||n(i).getPropertyValue(r)},exports.setStyle=function(n,i,r){i=t(i),n.style[e(i)]=r},exports.show=function(e){if("none"===exports.getStyle(e,"display"))e.style.display=null},exports.hide=function(e){e.style.display="none"},exports.addClass=function(e,t){if(e.classList)e.classList.add(t);else{for(var n=e.className?e.className.split(/\s+/):[],i=0,r=n.length;r>i;i++)if(n[i]===t)return e;n.push(t),e.className=n.join(" ")}return e},exports.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else{for(var n=e.className?e.className.split(/\s+/):[],i=0,r=n.length;r>i;i++)if(n[i]===t)n.splice(i,1),i--;e.className=n.join(" ")}return e},exports.toggleClass=function(e,t,n){return n="boolean"==typeof n?n:!exports.hasClass(e,t),exports[n?"addClass":"removeClass"](e,t),e},exports.hasClass=function(e,t){if(e.classList)return e.classList.contains(t);for(var n=e.className.split(/\s+/),i=0,r=n.length;r>i;i++)if(n[i]===t)return!0;return!1},exports.position=function(e,t){var n={},i=e.getBoundingClientRect();if(t){var r=t.getBoundingClientRect();n.left=i.left-r.left,n.top=i.top-r.top}else n.left=i.left+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),n.top=i.top+Math.max(document.documentElement.scrollTop,document.body.scrollTop);return n},exports}),define("saber-dom/traversal",["require","./selector"],function(require){var e=require("./selector").matches,exports={};return exports.children=function(e){for(var t,n=[],i=e.children,r=0;t=i[r];r++)if(1===t.nodeType)n.push(t);return n},exports.closest=function(t,n,i){i=i||document;do{if(e(t,n))return t;if(t===i)return null}while((t=t.parentNode)&&t!==document);return null},exports}),define("saber-dom/data",[],function(){var exports={},e="data-";return exports.setData=function(t,n,i){t.setAttribute(e+n,i)},exports.getData=function(t,n){return t.getAttribute(e+n)},exports.removeData=function(t,n){t.removeAttribute(e+n)},exports}),define("saber-dom/main",["require","./selector","./css","./traversal","./data"],function(require){function e(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];return e}var exports={};return e(exports,require("./selector")),e(exports,require("./css")),e(exports,require("./traversal")),e(exports,require("./data")),exports}),define("saber-dom",["saber-dom/main"],function(e){return e}),define("saber-viewport/config",[],{transition:!0,duration:.3,timing:"ease",transform:!0,mask:!0,resetScroll:!0,scrollContainer:document.body}),define("saber-viewport/Page",["require","saber-dom","saber-promise","saber-emitter"],function(require){function e(e){if(e.main&&e.main.parentNode)e.main.parentNode.removeChild(e.main);e.main=null,e.viewport=null}function t(e,t,n){n=n||{},r.mixin(this),this.data=n.data||{},this.url=e,this.viewport=t,this.cached=n.cached,this.hasVisited=!!n.hasVisited,this.main=n.main||document.createElement("div")}var n=require("saber-dom"),i=require("saber-promise"),r=require("saber-emitter"),o="data-viewport",s=o+"-bar",a=o+"-fixed";return t.prototype.getBar=function(){var e=this.main,t=n.queryAll("["+s+"]",e),i={};return t.forEach(function(e){i[e.getAttribute(s)]=e}),i},t.prototype.getFixed=function(){var e=this.main;return n.queryAll("["+a+"]",e)},t.prototype.clone=function(e){var n=new t(this.url,this.viewport,{cached:e.cached,main:this.main,data:this.data,hasVisited:this.hasVisited});return n},t.prototype.enter=function(e,t){if(!this.main)return i.rejected();else return this.viewport.transition(this,e,t)},t.prototype.remove=function(t){if(!this.cached||t===!0)e(this);else if(this.main&&this.main.parentNode)this.main.parentNode.removeChild(this.main)},t}),define("saber-viewport/transition",["require","saber-promise","./config"],function(require){function e(e,r){var o=new t;if(n.transition===!1||e===!1||!r.frontPage||r.frontPage.main===r.backPage.main)n.viewport.appendChild(r.backPage.main),o.fulfill();else{var s=i[e||n.transition];if(!s)throw new Error("can not find transition");s(o,r)}return o.promise()}var t=require("saber-promise"),n=require("./config"),i={};return e.register=function(e,t){i[e]=t},e}),define("saber-viewport/mask",[],function(){function e(e){e.stopPropagation(),e.preventDefault()}function t(){n=document.createElement("div"),n.className=exports.className,n.style.cssText+=";display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:100";var t=["touchstart","touchmove","touchend"];t.forEach(function(t){n.addEventListener(t,e,!1)}),document.body.appendChild(n)}var n,exports={};return exports.className="saber-viewport-mask",exports.show=function(){if(!n)t();n.style.display=""},exports.hide=function(){if(!n)t();n.style.display="none"},exports}),define("saber-viewport/main",["require","saber-dom","saber-lang/extend","saber-lang/curry","saber-promise","./config","./Page","./transition","./mask"],function(require){function e(){var e=c.viewport;e.style.position="relative"}function t(e,t){if(e)e.emit("beforeleave");if(t.emit("beforeenter"),c.mask)h.show()}function n(e,t){if(c.mask)h.hide();if(e)if(e.emit("afterleave"),e.main!==t.main)e.remove();if(t.emit("afterenter"),o=null,r=t,t.hasVisited)m=m.slice(0,m.indexOf(t.url));m.push(t.url)}function i(e,t){var n=c.viewport,i=s.children(n);if(!(i.length<=0)){var r;if(arguments.length<=0)r=new f("__blank__");else r=new f(e,v,t);return i.forEach(function(e){r.main.appendChild(e)}),n.appendChild(r.main),r}}var r,o,s=require("saber-dom"),a=require("saber-lang/extend"),l=require("saber-lang/curry"),u=require("saber-promise"),c=require("./config"),f=require("./Page"),p=require("./transition"),h=require("./mask"),d={},m=[],g={before:function(e,t){var n=c.scrollContainer,i=e.data.scrollTop=n.scrollTop,r=t.data.scrollTop||0;t.main.style.marginTop=i-r+"px"},after:function(e,t){var n=c.scrollContainer;t.main.style.marginTop=null,setTimeout(function(){n.scrollTop=t.data.scrollTop||0},10)}},v={};return v.transition=function(e,i,s){if(e!==o)return u.rejected();if(s=s||{},s.frontPage=r,s.backPage=e,s.processor={},c.resetScroll)s.processor.scroll=g;return t(r,e),p(i,s).then(l(n,r,e))},{init:function(t,n){if("string"==typeof t||t instanceof String)t=document.getElementById(t);c=a(c,n),c.viewport=t,e()},front:function(e,t){if(!r&&!o){if(t=t||{},page=i(e,t),page&&t.cached)d[e]=page;return page}},load:function(e,t){if(!r)r=i();t=t||{};var n;if(!t.noCache)n=d[e];if(!n)n=new f(e,v,t);else n=n.clone(t);if(t.cached)d[e]=n;else if(d[e])delete d[e];if(o)if(o.remove(!0),d[o.url])delete d[o.url];return n.hasVisited=m.indexOf(e)>=0,o=n},delCache:function(e){if(!e)d={};else if(d[e])delete d[e]}}}),define("saber-viewport",["saber-viewport/main"],function(e){return e}),define("saber-lang/inherits",[],function(){function e(e,t){var n=function(){};n.prototype=t.prototype;var i=e.prototype,r=e.prototype=new n;for(var o in i)if(i.hasOwnProperty(o))r[o]=i[o];return e.prototype.constructor=e,e}return e}),define("saber-lang/main",["require","./inherits","./extend","./curry","./bind"],function(require){return{inherits:require("./inherits"),extend:require("./extend"),curry:require("./curry"),bind:require("./bind")}}),define("saber-lang",["saber-lang/main"],function(e){return e}),define("saber-mm/config",["require","exports","module","saber-lang"],function(require,exports){function e(e,t){var n=r[e];if(n&&t.constructor===Object)t.constructor=n}function t(t){var n=t.view||{};e("View",n),n.router=n.router||r.router,n.templateData=i({},r.templateData,n.templateData),n.templateConfig=i({},r.templateConfig,n.templateConfig);var o=n.template||"";if(!o||Array.isArray(n.template)||"string"==typeof o){if(!Array.isArray(o))o=[o];n.template=o.concat(r.template)}t.view=n}function n(t){var n=t.model||{};e("Model",n),t.model=n}var i=require("saber-lang").extend,r={template:[],templateConfig:{},templateData:{},router:null,Presenter:null,Model:null,View:null};exports.get=function(e){return r[e]},exports.set=function(e){r=i(r,e)},exports.normal=function(i){return i=i||{},i.router=i.router||r.router,e("Presenter",i),t(i),n(i),i}}),define("saber-mm/Abstract",["require","exports","module","saber-emitter","saber-lang"],function(require,exports,module){function e(e){var t,n=e.events||{};Object.keys(n).forEach(function(i){if(t=n[i],i.indexOf(":")<0)e.on(i,t);else{var o=i.split(":"),s=o[0].trim();if(i=o[1]&&o[1].trim(),s&&e[s]&&i)e[s].on(i,r(t,e))}})}function t(e){e=e||{},i(this,e)}var n=require("saber-emitter"),i=require("saber-lang").extend,r=require("saber-lang").bind,o=require("saber-lang").inherits;o(t,n),t.prototype.init=function(){e(this),this.emit("init")},t.prototype.dispose=function(){this.off()},module.exports=t}),define("saber-mm/event",["require","saber-dom","saber-lang/extend"],function(require){function e(e){var t;return y.some(function(n){if(n.detect(e))t=n;return!!t}),t}function t(e,t,n){var i=!1,r=h.queryAll(t,n);return r.some(function(t){return i=t===e}),i}function n(e,n){for(var i=n.target,r=n.type,o=[],s=e.handlers[r]||[];s.delegateCount&&i&&i!==e.ele;){for(var a,l=s.delegateCount,u=0;l>u&&(a=s[u]);u++)if(t(i,a.selector,e.ele)){var c=d({},a);c.thisArg=i,o.push(c)}i=i.parentNode}return o=o.concat(s.slice(s.delegateCount||0))}function i(e){return function(t){var i=n(e,t);t=s(t),i.some(function(n){var i=n.thisArg||e.ele,r=n.fn.call(i,t);if(r===!1)t.preventDefault(),t.stopPropagation();return t.isPropagationStopped()})}}function r(t,n){var i=t.commonEventHandler,r=e(n);if(r)r.on(t.ele,n,i);else t.ele.addEventListener(n,i,!1)}function o(t,n){var i=t.commonEventHandler,r=e(n);if(r)r.off(t.ele,n,i);else t.ele.removeEventListener(n,i,!1)}function s(e){var t=e.stopPropagation;return e.stopPropagation=function(){t.call(this),e[g]=!0},e.isPropagationStopped=function(){return!!e[g]},e}function a(e){return e[m]}function l(e){var t=++v;return e[m]=t,t}function u(e){try{delete e[m]}catch(t){}}function c(e){this.uid=l(e),this.ele=e,this.handlers={},this.commonEventHandler=i(this),b[this.uid]=this}function f(e){var t=a(e);if(t)return b[t];else return new c(e)}function p(e){var t,n=a(e);if(n)t=b[n];return t}var h=require("saber-dom"),d=require("saber-lang/extend"),m="_event_uid",g="_stopped",v=0,y=[],b={};c.prototype.on=function(e,t,n){if(!n)n=t,t=void 0;var i=this.handlers[e];if(!i)i=this.handlers[e]=[],i.delegateCount=0,r(this,e);var o={fn:n,selector:t};if(t)i.delegateCount++,i.splice(i.delegateCount-1,0,o);else i.push(o)},c.prototype.off=function(e,t,n){if(!n)n=t,t=void 0;var i=this.handlers[e]||[];if(i.some(function(e,r){var o=!1;if(e.fn===n&&e.selector===t)i.splice(r,1),o=!0;return o}),i.length<=0)o(this,e)},c.prototype.dispose=function(){var e=this;u(e.ele),Object.keys(e.handlers).forEach(function(t){o(e,t)}),this.ele=null};var exports={};return exports.on=function(e,t,n,i){var r=f(e);r.on(t,n,i)},exports.off=function(e,t,n,i){var r=p(e);if(r)r.off(t,n,i)},exports.one=function(e,t,n,i){if(!i)i=n,n=void 0;var r=function(){var o=Array.prototype.slice.call(arguments),s=i.apply(this,o);return exports.off(e,t,n,r),s};exports.on(e,t,n,r)},exports.clear=function(e){var t=p(e);if(t)t.dispose()},exports.register=function(e){if(e.init)e.init();y.push(e)},exports}),function(e){function t(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];return e}function n(){this.raw=[],this.length=0}function i(){return"___"+j++}function r(e,t){var n=new Function;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e){return L[e]}function s(e){return'"'+e.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function a(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return"\\"+e})}function l(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,n){return t[n-0+1]})}function u(e){return e=e.replace(/^\s*\*/,""),l('gv({0},["{1}"])',s(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return"."+t}).split(".").join('","'))}function c(e,t,n,i,r,o){for(var s=n.length,a=e.split(t),l=0,u=[],c=0,f=a.length;f>c;c++){var p=a[c];if(c){var h=1;for(l++;;){var d=p.indexOf(n);if(0>d){u.push(l>1&&h?t:"",p);break}if(l=i?l-1:0,u.push(l>0&&h?t:"",p.slice(0,d),l>0?n:""),p=p.slice(d+s),h=0,0===l)break}if(0===l)r(u.join("")),o(p),u=[]}else p&&o(p)}if(l>0&&u.length>0)o(t),o(u.join(""))}function f(e,t,n){var i,r=[],o=t.options,a="",l="",p="",h="";if(n)a="ts(",l=")",p=P,h=_,i=o.defaultFilter;return c(e,o.variableOpen,o.variableClose,1,function(e){if(n&&e.indexOf("|")<0&&i)e+="|"+i;var o=e.indexOf("|"),s=(o>0?e.slice(0,o):e).replace(/^\s+/,"").replace(/\s+$/,""),c=o>0?e.slice(o+1):"",d=0===s.indexOf("*"),m=[d?"":a,u(s),d?"":l];if(c){c=f(c,t);for(var g=c.split("|"),v=0,y=g.length;y>v;v++){var b=g[v];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(b)){if(m.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)m.push(",",RegExp.$3);m.push(")")}}}r.push(p,m.join(""),h)},function(e){r.push(p,n?s(e):e,h)}),r.join("")}function p(e,t){this.value=e,this.engine=t}function h(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[]}function d(e,t){var n=e.stack,i=t?n.find(function(e){return e instanceof t}):n.bottom();if(i){for(var r;(r=n.top())!==i;){if(!r.autoClose)throw new Error(r.type+" must be closed manually: "+r.value);r.autoClose(e)}i.close(e)}return i}function m(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.master=RegExp.$3,this.name=RegExp.$1,h.call(this,e,t),this.blocks={}}function g(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,h.call(this,e,t),this.cloneProps=["name"]}function v(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,h.call(this,e,t),this.cloneProps=["name","state","blocks"],this.blocks={}}function y(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.expr=RegExp.$2,h.call(this,e,t),this.cloneProps=["name","expr"]}function b(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,h.call(this,e,t),this.cloneProps=["name","args"]}function w(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,h.call(this,e,t),this.cloneProps=["name","args"]}function x(e,t){var n=new RegExp(l("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",a(t.options.variableOpen),a(t.options.variableClose)),"i");if(!n.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,h.call(this,e,t),this.cloneProps=["list","item","index"]}function E(e,t){h.call(this,e,t)}function A(e,t){E.call(this,e,t)}function k(e,t){h.call(this,e,t)}function T(e,t){t.target=e;var n=t.engine,i=e.name;if(n.targets[i])switch(n.options.namingConflict){case"override":n.targets[i]=e,t.targets.push(i);case"ignore":break;default:throw new Error("Target exists: "+i)}else n.targets[i]=e,t.targets.push(i)}function C(e,t){N[e]=t,t.prototype.type=e}function q(e){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(e),this.targets={},this.filters=t({},O)}function S(e,t){function i(){var e;if(f.length>0&&(e=f.join(""))){var n=new p(e,t);if(n.beforeAdd(u),l.top().addChild(n),f=[],t.options.strip&&u.current instanceof h)n.value=e.replace(/^[\x20\t\r]*\n/,"");u.current=n}}var r,o=t.options.commandOpen,s=t.options.commandClose,a=t.options.commandSyntax,l=new n,u={engine:t,targets:[],stack:l,target:null},f=[];return c(e,o,s,0,function(e){var n=a.exec(e);if(n&&(r=N[n[2].toLowerCase()])&&"function"==typeof r){i();var l=u.current;if(t.options.strip&&l instanceof p)l.value=l.value.replace(/\r?\n[\x20\t]*$/,"\n");if(n[1])l=d(u,r);else{if(l=new r(n[3],t),"function"==typeof l.beforeOpen)l.beforeOpen(u);l.open(u)}u.current=l}else if(!/^\s*\/\//.test(e))f.push(o,e,s);r=null},function(e){f.push(e)}),i(),d(u),u.targets}n.prototype={push:function(e){this.raw[this.length++]=e},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(e){for(var t=this.length;t--;){var n=this.raw[t];if(e(n))return n}}};var j=178245,L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},O={html:function(e){return e.replace(/[&<>"']/g,o)},url:encodeURIComponent,raw:function(e){return e}},R='var r="";',P="r+=",_=";",D="return r;";if("undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)R="var r=[],ri=0;",P="r[ri++]=",D='return r.join("");';p.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;if(!e||t.strip&&/^\s*$/.test(e))return"";else return f(e,this.engine,1)},clone:function(){return this}},h.prototype={addChild:function(e){this.children.push(e)},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this)},close:function(e){if(e.stack.top()===this)e.stack.pop()},getRendererBody:function(){for(var e=[],t=this.children,n=0;n<t.length;n++)e.push(t[n].getRendererBody());return e.join("")},clone:function(){for(var e=this.constructor,t=new e(this.value,this.engine),n=0,i=this.children.length;i>n;n++)t.addChild(this.children[n].clone());

for(var n=0,i=this.cloneProps.length;i>n;n++){var r=this.cloneProps[n];t[r]=this[r]}return t}};var $='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';r(m,h),r(g,h),r(v,h),r(y,h),r(b,h),r(w,h),r(x,h),r(E,h),r(A,E),r(k,E);var M={READING:1,READED:2,APPLIED:3,READY:4};v.prototype.applyMaster=m.prototype.applyMaster=function(e){function t(e){var i=e.children;if(i instanceof Array)for(var r=0,o=i.length;o>r;r++){var s=i[r];if(s instanceof g&&n[s.name])s=i[r]=n[s.name];t(s)}}if(this.state>=M.APPLIED)return 1;var n=this.blocks,i=this.engine.targets[e];if(i&&i.applyMaster(i.master))return this.children=i.clone().children,t(this),this.state=M.APPLIED,1;else return void 0},m.prototype.isReady=function(){function e(i){for(var r=0,o=i.children.length;o>r;r++){var s=i.children[r];if(s instanceof v){var a=t.targets[s.name];n=n&&a&&a.isReady(t)}else if(s instanceof h)e(s)}}if(this.state>=M.READY)return 1;var t=this.engine,n=1;if(this.applyMaster(this.master))return e(this),n&&(this.state=M.READY),n;else return void 0},m.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function("data","engine",[$,R,this.getRendererBody(),D].join("\n")),t=this.engine;return this.renderer=function(n){return e(n,t)},this.renderer}return null},m.prototype.open=function(e){d(e),h.prototype.open.call(this,e),this.state=M.READING,T(this,e)},y.prototype.open=w.prototype.open=function(e){e.stack.top().addChild(this)},g.prototype.open=function(e){h.prototype.open.call(this,e),e.stack.find(function(e){return e.blocks}).blocks[this.name]=this},A.prototype.open=function(e){var t=new k;t.open(e);var n=d(e,E);n.addChild(this),e.stack.push(this)},k.prototype.open=function(e){var t=d(e,E);t.addChild(this),e.stack.push(this)},v.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,h.prototype.open.call(this,e),this.state=M.READING},w.prototype.close=y.prototype.close=function(){},v.prototype.close=function(e){h.prototype.close.call(this,e),this.state=M.READED},m.prototype.close=function(e){h.prototype.close.call(this,e),this.state=this.master?M.READED:M.APPLIED,e.target=null},v.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(e)},w.prototype.beforeOpen=v.prototype.beforeOpen=y.prototype.beforeOpen=x.prototype.beforeOpen=b.prototype.beforeOpen=g.prototype.beforeOpen=E.prototype.beforeOpen=p.prototype.beforeAdd=function(e){if(!e.stack.bottom()){var t=new m(i(),e.engine);t.open(e)}},v.prototype.getRendererBody=function(){return this.applyMaster(this.name),h.prototype.getRendererBody.call(this)},w.prototype.getRendererBody=function(){return l("{0}engine.render({2},{{3}}){1}",P,_,s(this.name),f(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(e,t,n){return(t||"")+s(n)+":"}))},y.prototype.getRendererBody=function(){if(this.expr)return l("v[{0}]={1};",s(this.name),f(this.expr,this.engine));else return""},E.prototype.getRendererBody=function(){return l("if({0}){{1}}",f(this.value,this.engine),h.prototype.getRendererBody.call(this))},k.prototype.getRendererBody=function(){return l("}else{{0}",h.prototype.getRendererBody.call(this))},x.prototype.getRendererBody=function(){return l('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',i(),f(this.list,this.engine),s(this.index||i()),s(this.item),i(),i(),h.prototype.getRendererBody.call(this))},b.prototype.getRendererBody=function(){var e=this.args;return l("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",R,D,P,_,h.prototype.getRendererBody.call(this),s(this.name),e?","+f(e,this.engine):"")};var N={};C("target",m),C("block",g),C("import",v),C("use",w),C("var",y),C("for",x),C("if",E),C("elif",A),C("else",k),C("filter",b),q.prototype.config=function(e){t(this.options,e)},q.prototype.compile=q.prototype.parse=function(e){if(e){var t=S(e,this);if(t.length)return this.targets[t[0]].getRenderer()}return new Function('return ""')},q.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer();else return void 0},q.prototype.render=function(e,t){var n=this.getRenderer(e);if(n)return n(t);else return""},q.prototype.addFilter=function(e,t){if("function"==typeof t)this.filters[e]=t};var I=new q;if(I.Engine=q,"object"==typeof exports&&"object"==typeof module)exports=module.exports=I;else if("function"==typeof define&&define.amd)define("etpl/main",[],I);else e.etpl=I}(this),define("etpl",["etpl/main"],function(e){return e}),define("saber-mm/AbstractView",["require","exports","module","saber-lang","etpl","./Abstract"],function(require,exports,module){function e(e,t){if(Array.isArray(t))t=t.join("");var n=i({},e.templateConfig||{}),o={};if(n.filters)o=n.filters,delete n.filters;var s=new r.Engine(n);Object.keys(o).forEach(function(e){s.addFilter(e,o[e])});var a=s.compile(t);if(!a)throw new Error("compile template fail");var l=s.render;e.template=s,e.template.render=function(t,n){n=i({},e.templateData,n);var r="";if(arguments.length<2||!t)r=a(t||n);else r=l.call(this,t,n);return r}}function t(e){e=e||{},o.call(this,e),this.init(),e.template=this.template}var n=require("saber-lang").inherits,i=require("saber-lang").extend,r=require("etpl"),o=require("./Abstract");n(t,o),t.prototype.init=function(){if(this.template=this.template||"",Array.isArray(this.template)||"string"==typeof this.template)e(this,this.template);this.bindElements=[],o.prototype.init.call(this)},t.prototype.set=function(e){this.main=e},t.prototype.render=function(e){if(this.main){var t=this.main.className.split(/\s+/);if(this.className&&t.indexOf(this.className)<0)this.main.className+=" "+this.className;this.emit("beforerender",e),this.main.innerHTML=this.template.render(this.templateMainTarget,e),this.emit("afterrender",e)}},t.prototype.ready=function(){this.emit("ready")},t.prototype.revived=function(){this.emit("revived")},t.prototype.leave=function(){this.emit("leave")},t.prototype.sleep=function(){this.emit("sleep")},module.exports=t}),define("saber-lang/type",["require"],function(){var exports={},e={};return"Boolean Number String Function Array Date RegExp Object Error".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),exports.type=function(t){return null==t?String(t):e[e.toString.call(t)]||"object"},exports.isPlainObject=function(e){return"object"===exports.type(e)&&Object.getPrototypeOf(e)===Object.prototype},exports.isEmptyObject=function(e){if("object"!==exports.type(e))return!1;if(Object.keys(e).length)return!1;else return!0},exports.isEmpty=function(e){return null===e||void 0===e||""===e||Array.isArray(e)&&0===e.length||exports.isEmptyObject(e)},exports}),define("saber-widget/main",["require","saber-lang","saber-lang/type"],function(require){var e={},t={configAttr:"s-ui",instanceAttr:"s-id"};e.config=function(e){require("saber-lang").extend(t,e)},e.getConfig=function(e){return t[e]};var n=8652548;e.getGUID=function(e){return e=e||"s",e+n++},e.dispose=function(e){if(!e)for(var t in i)i[t].dispose();else if("string"==typeof e){if(e=this.get(e))e.dispose()}else if("function"==typeof e.dispose)e.dispose();else if(/^\[object\sHTML/.test(Object.prototype.toString.call(e)))this.find(e).forEach(function(e){e.dispose()})},e.find=function(t){var n=this.getConfig("instanceAttr");return[].map.call(t.querySelectorAll("["+n+"]"),function(t){return e.get(t.getAttribute(n))})};var i={};e.add=function(e){var t=i[e.id];if(!t||t!==e)i[e.id]=e},e.remove=function(e){delete i[e.id]},e.get=function(e){return i[e]};var r={};e.register=function(t){if("function"==typeof t){var n=t.prototype.type;if(n in r)throw new Error(n+" is exists!");r[n]=t,e[n.charAt(0).toLowerCase()+n.slice(1)]=function(e,t){if(require("saber-lang/type").isPlainObject(e))t=e||{};else t=t||{},t.main=e;return new r[n](t).render()}}};var o={};return e.registerPlugin=function(e){if("function"==typeof e){var t=e.prototype.type;if(t in o)throw new Error("plugin "+t+" is exists!");o[t]=e}},e.enablePlugin=function(e,t,n){var i=e.plugins||(e.plugins={}),r=i[t];if(!r&&(r=o[t]))r=e.plugins[t]=new r(e,n);if(r)r.enable()},e.disablePlugin=function(e,t){var n=e.plugins;if(n){var i;if(Array.isArray(t))i=t;else if(!t)i=Object.keys(n);else if("string"==typeof t)i=[t];i.forEach(function(e){if(e&&n[e])n[e].disable()})}},e.disposePlugin=function(e,t){var n=e.plugins;if(n){var i;if(Array.isArray(t))i=t;else if(!t)i=Object.keys(n);else if("string"==typeof t)i=[t];i.forEach(function(e){if(e&&n[e])n[e].dispose(),delete n[e]})}},e}),define("saber-widget",["saber-widget/main"],function(e){return e}),define("saber-mm/View",["require","saber-lang/inherits","saber-dom","./event","./AbstractView","saber-widget"],function(require){function e(e,t){return t[a]=function(n){return t.call(e,this,n)}}function t(e){var t,n,i,r=e.domEvents||{};Object.keys(r).forEach(function(o){i=r[o],o=o.split(":"),t=o[0].trim(),n=o[1]?o[1].trim():void 0,e.addDomEvent(e.main,t,n,i)})}function n(e){s.call(this,e)}var i=require("saber-lang/inherits"),r=require("saber-dom"),o=require("./event"),s=require("./AbstractView"),a="__delegate__";return i(n,s),n.prototype.ready=function(){t(this),s.prototype.ready.call(this)},n.prototype.query=function(e,t){if(t=t||this.main,!t)return null;else return r.query(e,t)},n.prototype.queryAll=function(e,t){if(t=t||this.main,!t)return[];else return r.queryAll(e,t)},n.prototype.redirect=function(e,t,n){this.router.redirect(e,t,n)},n.prototype.addDomEvent=function(t,n,i,r){if(this.bindElements.indexOf(t)<0)this.bindElements.push(t);if(!r)r=i,i=void 0;o.on(t,n,i,e(this,r))},n.prototype.removeDomEvent=function(e,t,n,i){if(!i)i=n,n=void 0;if(i[a])o.off(e,t,n,i[a])},n.prototype.dispose=function(){this.emit("dispose"),this.bindElements.forEach(function(e){o.clear(e)}),this.bindElements=[],require("saber-widget").dispose(this.main),this.main=null,s.prototype.dispose.call(this)},n}),define("saber-mm/Model",["require","exports","module","saber-lang","saber-promise","./Abstract"],function(require,exports,module){function e(e){r.call(this,e),this.init()}var t=require("saber-lang").inherits,n=require("saber-lang").extend,i=require("saber-promise"),r=require("./Abstract");t(e,r),e.prototype.init=function(){this.store=n({},this.store),r.prototype.init.call(this)},e.prototype.set=function(e,t){this.store[e]=t},e.prototype.get=function(e){return this.store[e]},e.prototype.fill=function(e){this.store=n(this.store,e)},e.prototype.del=function(e){var t=this.store[e];return delete this.store[e],t},e.prototype.fetch=function(){return i.resolved(this.query)},module.exports=e}),define("saber-mm/Presenter",["require","exports","module","saber-lang","./Abstract","saber-promise","./View","./Model"],function(require,exports,module){function e(e){i.call(this,e),this.init()}var t=require("saber-lang").inherits,n=require("saber-lang").extend,i=require("./Abstract"),r=require("saber-promise"),o=require("./View"),s=require("./Model");t(e,i),e.prototype.init=function(){var e;if(this.view&&this.view.constructor!==Object)e=this.view.constructor;else e=o;if(this.view=new e(this.view),this.model&&this.model.constructor!==Object)e=this.model.constructor;else e=s;this.model=new e(this.model),i.prototype.init.call(this)},e.prototype.set=function(e){this.path=e},e.prototype.redirect=function(e,t,n){this.router.redirect(e,t,n)},e.prototype.enter=function(e,t,i,r){this.path=t,this.options=n({},r),this.view.set(e),this.emit("enter");var o=this;return this.model.fetch(i).then(function(e){o.view.render(e)})},e.prototype.wakeup=function(e,t,i){return this.path=e,this.options=n({},i),this.emit("wakeup"),r.resolved()},e.prototype.ready=function(){this.emit("ready"),this.view.ready()},e.prototype.revived=function(){this.emit("revived"),this.view.revived()},e.prototype.complete=function(){this.emit("complete")},e.prototype.leave=function(){this.emit("leave"),this.view.leave(),this.dispose()},e.prototype.sleep=function(){this.emit("sleep"),this.view.sleep()},e.prototype.dispose=function(){this.view.dispose(),this.model.dispose(),i.prototype.dispose.call(this)},module.exports=e}),define("saber-mm/main",["require","saber-promise","./config","./Presenter","./Abstract","./Model","./View"],function(require){function e(e){return"[object String]"===Object.prototype.toString.call(e)}function t(e){var t=new i;return window.require([e],function(e){n(e).then(function(e){t.resolve(e)})}),t.promise()}function n(n){if(e(n))return t(n);var o;if(n=r.normal(n),n.constructor!==Object)o=n.constructor;else o=require("./Presenter");return i.resolved(new o(n))}var i=require("saber-promise"),r=require("./config"),exports={};return exports.config=function(e){r.set(e)},exports.create=n,exports.Abstract=require("./Abstract"),exports.Presenter=require("./Presenter"),exports.Model=require("./Model"),exports.View=require("./View"),exports}),define("saber-mm",["saber-mm/main"],function(e){return e}),define("saber-firework/config",[],{index:"",path:"/",root:"",template:[],templateConfig:{},templateData:{},isomorphic:!1,syncDataKey:"__rebas__",viewport:{transition:!1},processor:{transition:!1},timeout:1e3}),define("saber-router/config",[],{index:"",path:"/",root:""}),define("saber-router/controller",["require"],function(){var e=["redirect","init","dispose","reset"],t={};e.forEach(function(e){t[e]=function(){throw new Error('route controller need to implement "'+e+'"')}});var exports={};return exports.plugin=function(e){t=e},e.forEach(function(e){exports[e]=function(){var n=Array.prototype.slice.call(arguments);return t[e].apply(t,n)}}),exports}),define("saber-router/main",["require","saber-lang/extend","./config","./controller"],function(require){function e(e){var t=-1;return e=e.toString(),u.some(function(n,i){if(n.raw.toString()===e)t=i;return-1!==t}),t}function t(e,t){for(var n,i={},r=t.params||[],o=e.match(t.path)||[],s=1;s<o.length;s++)n=r[s-1]||"$"+s,i[n]=decodeURIComponent(o[s]);return i}function n(e,i){function r(){if(c=!1,o){var e=s({},o);o=null,n(e.url,e.options)}}if(i=i||{},c)return void(o={url:e,options:i});c=!0;var a,l,f=s({},e.getQuery()),p={},h=e.getPath();if(u.some(function(n){if(n.path instanceof RegExp){if(n.path.test(h))a=n,p=t(h,n)}else if(e.equalPath(n.path))a=n;if(!n.path)l=n;return!!a}),a=a||l,!a)throw o=null,c=!1,new Error("can not found route for: "+h);if(i.title)document.title=i.title;var d=[h,f,p,e.toString(),i];if(a.fn.length>d.length)d.push(r),a.fn.apply(a.thisArg,d);else a.fn.apply(a.thisArg,d),r()}function i(e){var t={params:[]};return t.path=e.replace(/:([^/]+)/g,function(e,n){return t.params.push(n),"([^/]+)"}),t.path=new RegExp(t.path+"$"),t}function r(e,t,n){var r={raw:e,path:e,fn:t,thisArg:n};if(!(e instanceof RegExp)&&e.indexOf(":")>=0)r=s(r,i(e));u.push(r)}var o,s=require("saber-lang/extend"),a=require("./config"),l=require("./controller"),u=[],c=!1,exports={};return exports.reset=function(e,t,n){l.reset(e,t,n)},exports.config=function(e){e=e||{};var t=e.root;if(t&&"/"===t.charAt(t.length-1))t=e.root=t.substring(0,t.length-1);if(t&&"/"!==t.charAt(0))e.root="/"+t;s(a,e)},exports.add=function(t,n,i){if(e(t)>=0)throw new Error("path has been existed");r(t,n,i)},exports.remove=function(t){var n=e(t);if(n>=0)u.splice(n,1)},exports.clear=function(){u=[]},exports.redirect=function(e,t,n){l.redirect(e,t,n)},exports.start=function(e){exports.config(e),l.init(n)},exports.stop=function(){l.dispose(),exports.clear(),o=null},exports.controller=function(e){l.plugin(e)},exports}),define("saber-router",["saber-router/main"],function(e){return e}),define("saber-uri/component/Abstract",[],function(){function e(){var e=Array.prototype.slice.call(arguments);this.set.apply(this,e)}return e.prototype.get=function(){return this.data},e.prototype.set=function(e){this.data=e||""},e.prototype.add=function(e){this.set(e)},e.prototype.remove=function(){this.data=""},e.prototype.toString=function(){return this.data.toString()},e.prototype.equal=function(t){if(t instanceof e)t=t.get();return this.data==t},e}),define("saber-uri/component/Path",["require","saber-lang/inherits","./Abstract"],function(require){function e(e){if(!e)e="/";return e}function t(e){return e=e.split("/"),e.pop(),e.join("/")}function n(e,t){for(var n,i=0,r=e.length-1;n=e[r];r--)if("."===n)e.splice(r,1);else if(".."===n)e.splice(r,1),i++;else if(i)e.splice(r,1),i--;if(t)for(;i-->0;)e.unshift("..");return e}function i(e,t){o.call(this,e,t)}var r=require("saber-lang/inherits"),o=require("./Abstract");return i.resolve=function(e,r){if(r=r||"","/"===r.charAt(0))return i.resolve(r);var o="/"===e.charAt(0),s=!1;if(r)e=t(e),s="/"===r.charAt(r.length-1);else if(e.length>1)s="/"===e.charAt(e.length-1);var a=e.split("/").concat(r.split("/")).filter(function(e){return!!e});return a=n(a,!o),(o?"/":"")+(a.length>0?a.join("/")+(s?"/":""):"")},r(i,o),i.prototype.set=function(e,t){if(t instanceof i)t=t.get();var n=[e||""];if(t)n.unshift(t);this.data=i.resolve.apply(i,n)},i.prototype.equal=function(t){var n=e(this.data);if(t instanceof i)t=e(t.get());else t=e(i.resolve(t||""));return n===t},i.prototype.resolve=function(e,t){if(e instanceof i)e=e.get();var n=[this.data];if(t)n.unshift(e);else n.push(e);this.data=i.resolve.apply(i,n)},i}),define("saber-uri/util/parse-query",[],function(){function e(e){var t={};e=e.split("&");var n,i;return e.forEach(function(e){if(e)if(e=e.split("="),n=e[0],i=e.length>=2?decodeURIComponent(e[1]):null,t[n]){if(!Array.isArray(t[n]))t[n]=[t[n]];t[n].push(i)}else t[n]=i}),t}return e}),define("saber-uri/util/stringify-query",[],function(){function e(e){var t,n=[];return Object.keys(e).forEach(function(i){if(t=e[i],!Array.isArray(t))t=[t];t.forEach(function(e){if(null===e)n.push(i);else n.push(i+"="+encodeURIComponent(e||""))})}),n.join("&")}return e}),define("saber-uri/component/Query",["require","saber-lang/inherits","saber-lang/extend","./Abstract","../util/parse-query","../util/stringify-query"],function(require){function e(e){return"[object Object]"===Object.prototype.toString.call(e)}function t(e){return"string"==typeof e}function n(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;e=e.slice(0),e=e.slice(0),e.sort(),t.sort();for(var n=!0,i=0,r=e.length;n&&r>i;i++)n=e[i]==t[i];return n}function i(t,i){if(!e(t)||!e(i))return!1;var r=Object.keys(t),o=Object.keys(i);if(r.length!==o.length)return!1;for(var s,a,l=!0,u=0;l&&(s=r[u]);u++){if(!i.hasOwnProperty(s)){l=!1;break}if(a=t[s],Array.isArray(a))l=n(a,i[s]);else l=a==i[s]}return l}function r(e){if(Array.isArray(e))e=e.map(function(e){return decodeURIComponent(e||"")});else if(!e&&!t(e))e=null;else e=decodeURIComponent(e);return e}function o(e,t,n){var i=n[e];if(t=r(t),i){if(!Array.isArray(i))i=[i];if(Array.isArray(t))i=i.concat(t);else i.push(t)}else i=t;return n[e]=i,n}function s(e){e=e||{},u.call(this,e)}var a=require("saber-lang/inherits"),l=require("saber-lang/extend"),u=require("./Abstract"),c=require("../util/parse-query"),f=require("../util/stringify-query"),p="?";return a(s,u),s.prototype.set=function(){if(1===arguments.length){var t=arguments[0];if(e(t)){var n=this.data={};Object.keys(t).forEach(function(e){n[e]=r(t[e])})}else this.data=c(t)}else this.data[arguments[0]]=r(arguments[1])},s.prototype.get=function(e){return e?this.data[e]:l({},this.data)},s.prototype.toString=function(e){e=e||p;var t=f(this.data);return t?e+t:""},s.prototype.equal=function(e){if(t(e))e=c(e);else if(e instanceof s)e=e.get();return i(this.data,e)},s.prototype.add=function(t,n){var i=this.data;if(e(t))Object.keys(t).forEach(function(e){o(e,t[e],i)});else o(t,n,i);this.data=i},s.prototype.remove=function(e){if(!e)this.data={};else if(this.data.hasOwnProperty(e))delete this.data[e]},s}),define("saber-uri/component/Fragment",["require","saber-lang/inherits","./Abstract"],function(require){function e(e){n.call(this,e)}var t=require("saber-lang/inherits"),n=require("./Abstract"),i="#";return t(e,n),e.prototype.toString=function(e){return e=e||i,this.data?e+this.data:""},e}),define("saber-router/URL",["require","saber-uri/component/Path","saber-uri/component/Query","saber-uri/component/Fragment","./config"],function(require){function e(e){if("/"===e.charAt(e.length-1))e+=o.index;return e}function t(e,t){t=t||{},e=(e||"").trim()||o.path;var a=this.token=t.token||s,l=t.root||o.root;if("/"===l.charAt(l.length-1))l=l.substring(0,l.length-1);this.root=l,e=e.split("#"),this.fragment=new r(e[1]),e=e[0].split(a);var u=t.base||{};this.path=new n(e[0],u.path),this.query=new i(e[1]);var c=this.path.get();if(this.outRoot=0===c.indexOf(".."),this.outRoot)if(c=n.resolve(l+"/",c),0===c.indexOf(l))c=c.substring(l.length),this.path.set(c),this.outRoot=!1;if(!this.outRoot&&"/"!==c.charAt(0))this.path.set("/"+c);if(t.query)this.query.add(t.query)}var n=require("saber-uri/component/Path"),i=require("saber-uri/component/Query"),r=require("saber-uri/component/Fragment"),o=require("./config"),s="?";return t.prototype.toString=function(){var e=this.root,t=this.path.get();if(this.outRoot)t=n.resolve(e+"/",t);else t=e+t;return t+this.query.toString(this.token)+this.fragment.toString()},t.prototype.equalPath=function(t){var n=e(this.path.get());return t=e(t),n===t},t.prototype.equal=function(e){return this.query.equal(e.query)&&this.equalPath(e.path.get())},t.prototype.equalWithFragment=function(e){return this.equal(e)&&this.fragment.equal(e.fragment)},t.prototype.getQuery=function(){return this.query.get()},t.prototype.getPath=function(){return this.path.get()},t}),define("saber-router/controller/hash",["require","../URL"],function(require){function e(e,t){if(!o||!e.equal(o)||t.force)r(e,t),o=e}function t(e,t){var n="~";if(!e)e=location.hash.substring(1).split(n)[0];return new s(e,{query:t,base:o,token:n})}function n(e){location.replace("#"+e),a.push(!0)}function i(){if(!a.pop()){var i=location.hash.substring(1),r=t(i);if(e(r,{}),"/"!==i.charAt(0))n(r.toString())}}var r,o,s=require("../URL"),a=[],exports={};return exports.init=function(e){window.addEventListener("hashchange",i,!1),r=e,i()},exports.redirect=function(n,i,r){if(r=r||{},n=t(n,i),e(n,r),!r.silent)location.hash="#"+n.toString()},exports.reset=function(i,r,s){if(s=s||{},i=t(i,r),!o||!o.equal(i)){if(!s.silent)e(i,s);else o=i;n(i.toString())}},exports.dispose=function(){window.removeEventListener("hashchange",i,!1),o=null},exports}),define("saber-firework/main",["require","saber-emitter","saber-promise","fastclick","saber-lang/extend","saber-lang/bind","saber-lang/curry","saber-viewport","saber-mm","./config","saber-router","saber-router/controller/hash"],function(require){function e(e){var t=E.processor||{};return t[e]}function t(e){e.done()}function n(){var e;Object.keys(k).forEach(function(t){if(e=k[t],T.action!==e)e.dispose()}),k={},w.delCache()}function i(e){var t=k[e];if(t){if(T.action!==t)t.dispose();delete k[e],w.delCache(e)}}function r(e,t,n){if(e){if(T.action=e,t.cached)k[t.path]=e}else T.action=null;T.route=t,T.page=n,T.path=t.path}function o(n,i){function o(e){if(clearTimeout(h),p("beforetransition"),r(!e&&i,n,f),e)return f.enter(u.type,u).then(y(m.rejected,m));else return f.enter(u.type,u)}function s(){return p("error"),o(!0)}function a(){g.forEach(function(e){i[e]()}),t(n)}var l=n.options||{},u=n.transition||{},c=e("transition");if(c)v(u,c(n,T.route)||{});if(n.path===T.path)u.type=!1;var f=w.load(n.path,{cached:n.cached,noCache:l.noCache}),p=function(e,t){return function(n){exports.emit(n,e,t)}}({route:v({},n),action:i,page:f},{route:v({},T.route),action:T.action,page:T.page});f.on("afterenter",b(p,"afterload")),p("beforeload");var h,d,g=["complete"],x=[n.path,n.query,l];if(!k[n.path])d="enter",x.unshift(f.main),g.unshift("ready");else d="wakeup",g.unshift("revived");h=setTimeout(b(t,n),E.timeout),i[d].apply(i,x).then(o,s).then(a,b(t,n))}function s(e){var n=e.options||{};if(e.path!==T.path||n.force||!T.action||!T.action.refresh){if(n.noCache)i(e.path);if(T.action)T.action[k[T.path]?"sleep":"leave"]();var r=k[e.path];if(!r)x.create(e.action).then(b(o,e));else o(e,r)}else{var s=T.action.refresh(e.query,e.options);if(!s||"function"!=typeof s.then)t(e);else s.then(b(t,e))}}function a(e){function t(e){r+=e||A.length,n()}function n(){var o=A[r++];if(!o)i.resolve(e);else if(!o.url||o.url instanceof RegExp&&o.url.test(e.path)||o.url===e.path)o.filter(e,n,t);else n()}var i=new m,r=0;return n(),i.promise()}function l(e){var t=v({},window[E.syncDataKey]);return e?t[e]:t}function u(e,n,i){function o(t){exports.emit(t,{route:null,action:null,page:null},{route:e,action:i,page:n})}o("beforeload"),i.set(e.path),i.view.set(n.main),i.model.fill(l("model")),o("beforetransition"),i.ready(!0),i.complete(),o("afterload"),r(i,e,n),t(e)}function c(e){function n(e){if(o!==e.path)E.router.redirect(e.path,e.query,e.options),t(r);else s(e)}var i,r=e,o=e.path;if(E.isomorphic&&!T.action&&(i=w.front(o,{cached:e.cached})))return void x.create(e.action).then(b(u,e,i));else return void a(e).then(n)}function f(e){return function(t,n,i,r,o,s){var a=v({},e);a.path=t,a.query=v(i,n),a.options=o,a.url=r,a.done=s,c(a)}}function p(e){var t=v(E,e);if(t.templateData=v({},l("templateData"),t.templateData),!Array.isArray(t.template))t.template=[t.template];if(!t.router)t.router=require("saber-router"),t.router.controller(require("saber-router/controller/hash"));return t}function h(e){var t={},n=["template","templateConfig","templateData","router","Presenter","View","Model"];return n.forEach(function(n){if(n in e)t[n]=e[n]}),t}var d=require("saber-emitter"),m=require("saber-promise"),g=require("fastclick"),v=require("saber-lang/extend"),y=require("saber-lang/bind"),b=require("saber-lang/curry"),w=require("saber-viewport"),x=require("saber-mm"),E=require("./config"),A=[],k={},T={},exports={};d.mixin(exports);var C=[];return exports.load=function(e){if(!Array.isArray(e))e=[e];if(!E.router)C=C.concat(e);else e.forEach(function(e){E.router.add(e.path,f(e))})},exports.start=function(e,t){var n=p(t),i=n.router;x.config(h(n)),w.init(e,n.viewport),g.attach(document.body),C.forEach(function(e){i.add(e.path,f(e))}),i.config({path:n.path,index:n.index,root:n.root}),i.start()},exports.addFilter=function(e,t){if(1===arguments.length)t=e,e=null;A.push({url:e,filter:t})},exports.removeFilter=function(e){if(!e)A=[];else{var t,n=A.some(function(n,i){return t=i,n.url.toString()===e.toString()});if(n)A.splice(t,1)}},exports.delCachedAction=function(e){if(e)i(e);else n()},exports.stop=function(){var e=E.router;e.stop(),e.clear(),C=[],A=[],T={},exports.delCachedAction()},exports.getSyncData=l,exports}),define("saber-firework",["saber-firework/main"],function(e){return e}),define("plugin/slide/1.0/slide-img",["require"],function(){function e(e){this.wrap=e.wrap,this.wrapWidth=this.wrap.offsetWidth,this.wrapInner=this.wrap.getElementsByTagName("ul")[0],this.lists=this.wrap.getElementsByTagName("li"),this.listLength=this.lists.length;var t={loop:!1,autoPlay:!1,autoTime:5e3,speed:300,pagination:!0};this.ops=e||{};for(var n in t)if("undefined"==typeof e[n])e[n]=t[n];else if("object"==typeof e[n])for(var i in t[n])if("undefined"==typeof e[n][j])e[n][j]=t[n][j];this.init(),this.bindEvent()}function t(t){return new e(t)}return e.prototype.createSprite=function(){var e=document.createElement("div");e.className="spinner";for(var t=0;3>t;t++){var n=document.createElement("div");n.className="bounce"+parseInt(t+1),e.appendChild(n)}this.wrap.appendChild(e);var i=new Image;i.src=this.lists[this.listLength-1].getElementsByTagName("img")[0].src;var r=this;i.onload=function(){e.remove(),r.wrapInner.style.opacity="1"}},e.prototype.init=function(){this.ratio=this.wrap.offsetHeight/this.wrap.offsetWidth,this.wrapWidth=this.wrap.offsetWidth,this.wrapHeight=this.wrap.offsetHeight,this.wrapInner.style.width=this.wrapWidth+"px",this.index=0;for(var e=0;e<this.listLength;e++){this.lists[e].style.width=this.wrapWidth+"px",this.lists[e].style.webkitTransform="translate3d("+e*this.wrapWidth+"px,0,0)";var t=this.lists[e].getElementsByTagName("img")[0];if(t.height/t.width>this.ratio)t.style.height=this.wrapHeight+"px";else t.style.width=this.wrapWidth+"px";delete t}if(this.ops.pagination)this.createBullet();if(this.ops.loop)this.copyLists(),this.index=1,this.listLength=this.wrapInner.getElementsByTagName("li").length;if(this.ops.autoPlay)this.autoPlay();var n=this,i=null;window.onresize=function(){if(i)clearTimeout(i);i=setTimeout(function(){n.resizeInit()},300)}},e.prototype.resizeInit=function(){this.ratio=this.wrap.offsetHeight/this.wrap.offsetWidth,this.wrapWidth=this.wrap.offsetWidth,this.wrapHeight=this.wrap.offsetHeight,this.wrapInner.style.width=this.wrapWidth+"px";for(var e=0;e<this.listLength;e++){if(this.lists[e].style.width=this.wrapWidth+"px",this.index>e)this.Transform3d(this.lists[e],-this.wrapWidth,!1);else if(this.index<e)this.Transform3d(this.lists[e],this.wrapWidth,!1);var t=this.lists[e].getElementsByTagName("img")[0];if(t.height/t.width>this.ratio)t.style.height=this.wrapHeight+"px",t.style.width="auto";else t.style.width=this.wrapWidth+"px",t.style.height="auto";delete t}},e.prototype.copyLists=function(){var e=document.createElement("li"),t=document.createElement("li");e.style.cssText=this.wrapWidth+"px",e.style.webkitTransform="translate3d(-"+this.wrapWidth+"px,0,0)",e.innerHTML=this.lists[this.listLength-1].innerHTML,t.style.cssText=this.wrapWidth+"px",t.style.webkitTransform="translate3d("+this.listLength*this.wrapWidth+"px,0,0)",t.innerHTML=this.lists[0].innerHTML,this.wrapInner.insertBefore(e,this.wrapInner.firstChild),this.wrapInner.appendChild(t)},e.prototype.createBullet=function(){var e=this;pagination=document.createElement("div"),pagination.className="pagination";for(var t=0;t<this.listLength;t++){if(span=document.createElement("span"),this.index==t)span.className="active";span.addEventListener("click",function(t){e.moveTo(t)}.bind(null,t)),pagination.appendChild(span)}this.wrap.appendChild(pagination),this.bulletLists=pagination.getElementsByTagName("span"),this.bllength=this.bulletLists.length},e.prototype.autoPlay=function(){var e=this;clearInterval(e.timer),e.timer=setInterval(function(){e.move("+1")},e.ops.autoTime)},e.prototype.stopPlay=function(){clearInterval(this.timer)},e.prototype.Transform3d=function(e,t,n){if(!e)throw new Error("未指定动画元素！");else e.style.webkitTransform="translate3d("+t+"px,0,0)";if(n)e.style.webkitTransition=this.ops.speed+"ms ease-out";else e.style.webkitTransition="none"},e.prototype.loopSetting=function(e){var t=this;switch(e){case 0:setTimeout(function(){mindex=t.listLength-2,t.index=mindex,t.Transform3d(t.lists[0],-t.wrapWidth,!1),t.Transform3d(t.lists[mindex],0,!1),t.Transform3d(t.lists[mindex+1],t.wrapWidth,!1),t.Transform3d(t.lists[mindex-1],-t.wrapWidth,!1);for(var e=mindex-1;e>0;e--)t.Transform3d(t.lists[e],-t.wrapWidth,!1)},t.ops.speed);break;case t.listLength-1:setTimeout(function(){mindex=1,t.index=mindex,t.Transform3d(t.lists[mindex],0,!1),t.Transform3d(t.lists[mindex+1],t.wrapWidth,!1),t.Transform3d(t.lists[mindex-1],-t.wrapWidth,!1),t.Transform3d(t.lists[t.listLength-1],t.wrapWidth,!1);for(var e=mindex+1;e<t.listLength-1;e++)t.Transform3d(t.lists[e],t.wrapWidth,!1)},t.ops.speed)}},e.prototype.moveTo=function(e){this.stopPlay();var t=e+1;if(this.ops.pagination){for(var n=0;n<this.bllength;n++)this.bulletLists[n].setAttribute("class","");this.bulletLists[e].setAttribute("class","active")}if(this.index=t,this.lists[t]&&this.Transform3d(this.lists[t],0,!0),this.lists[t+1]&&this.Transform3d(this.lists[t+1],this.wrapWidth,!0),this.lists[t-1]&&this.Transform3d(this.lists[t-1],-this.wrapWidth,!0),this.ops.loop)this.loopSetting(this.index);this.autoPlay();

},e.prototype.move=function(e){var t;if("number"==typeof e)t=this.index;else if("string"==typeof e)t=this.index+1*e;if(t>this.listLength-1)t=this.listLength-1;else if(0>t)t=0;if(this.ops.pagination)for(var n=0;n<this.bllength;n++)if(n==t-1)this.bulletLists[n].setAttribute("class","active");else if(this.bulletLists[n].setAttribute("class",""),t>this.bllength)this.bulletLists[0].setAttribute("class","active");else if(0==t)this.bulletLists[this.bllength-1].setAttribute("class","active");if(this.index=t,this.lists[t]&&this.Transform3d(this.lists[t],0,!0),this.lists[t+1]&&this.Transform3d(this.lists[t+1],this.wrapWidth,!0),this.lists[t-1]&&this.Transform3d(this.lists[t-1],-this.wrapWidth,!0),this.ops.loop)this.loopSetting(this.index)},e.prototype.bindEvent=function(){var e=this,t=this.wrapWidth/3,n=function(t){e.startX=t.touches[0].pageX,e.offsetX=0,e.startTime=1*new Date,e.stopPlay()},i=function(t){t.preventDefault(),e.offsetX=t.touches[0].pageX-e.startX;var n=e.index-1,i=n+3;for(n;i>n;n++)e.lists[n]&&e.Transform3d(e.lists[n],(n-e.index)*e.wrapWidth+e.offsetX,!1)},r=function(){var n=1*new Date;if(n-e.startTime>700)if(e.offsetX>=t)e.move("-1");else if(e.offsetX<-t)e.move("+1");else e.move("0");else if(e.offsetX>=60)e.move("-1");else if(e.offsetX<-60)e.move("+1");else e.move("0");e.autoPlay()};e.wrap.addEventListener("touchstart",n,!1),e.wrap.addEventListener("touchmove",i,!1),e.wrap.addEventListener("touchend",r,!1)},t}),define("home/home.tpl",[],function(){return'<link rel="stylesheet" href="${path}/home/home.css">\n\n   <header>\n     <span class="logo"></span>\n   </header>\n\n   <div class="wrap">\n     <div id="photo">\n       <ul id="pic-view" class="pic-view">\n         <!-- for: ${homeData.bannerImg} as ${item} -->\n            <li>\n                <!-- if : ${item.link} -->\n                <a href=${item.link}>\n                <!--else-->\n                <a>\n                <!-- /if -->\n                    <img src="${item.img}" />\n                </a>\n            </li>\n            <!-- /for -->\n       </ul>\n     </div>\n\n     <div class="container">\n      <section class="content-banner">\n        <a href="#/item/item~1"><img src="${path}/common/img/home-banner.jpg"/></a>\n      </section>\n\n      <nav class="content-nav">\n        <div class="nav-row">\n          <a href="#/item/item~1">\n            <aside class="col-span col-span-one">\n              <img src="${path}/common/img/icon-design.png"/>\n            </aside>\n          </a>\n          <a href="#/item/item~2">\n            <aside class="col-span col-span-two">\n              <img src="${path}/common/img/icon-good.png"/>\n            </aside>\n          </a>\n        </div>\n        <div class="nav-row">\n          <a href="#/item/item~3">\n            <aside class="col-span col-span-one">\n              <img src="${path}/common/img/icon-data.png"/>\n            </aside>\n          </a>\n          <a href="#/item/item~4">\n            <aside class="col-span col-span-two">\n              <img src="${path}/common/img/icon-change.png"/>\n            </aside>\n          </a>\n        </div>\n      </nav>\n\n      <section class="content-step">\n        <img src="${path}/common/img/content-step.jpg"/>\n      </section>\n\n     <section class="content-case">\n       <dt class="case-title">\n         <p class="title">最新病例 New cases</p>\n         <span class="more"> <a href="#/detail/detail~8">查看全部 ></a> </span>\n       </dt>\n       <ul class="case-item">\n         <li>\n           <img src="${path}/common/img/case01.jpg"/>\n           <article>\n             <h3>冠状动脉硬化&nbsp;&nbsp;狭窄75%</h3>\n             <dd>王先生 &nbsp;&nbsp; 年龄:24</dd>\n           </article>\n         </li>\n\n         <li>\n           <img src="${path}/common/img/case02.jpg"/>\n           <article>\n           <h3>冠状动脉硬化&nbsp;&nbsp;狭窄75%</h3>\n           <dd>王先生 &nbsp;&nbsp; 年龄:24</dd>\n           </article>\n         </li>\n\n         <li>\n           <img src="${path}/common/img/case03.jpg"/>\n           <article>\n           <h3>冠状动脉硬化&nbsp;&nbsp;狭窄75%</h3>\n           <dd>王先生 &nbsp;&nbsp; 年龄:24</dd>\n           </article>\n         </li>\n\n         <li>\n           <img src="${path}/common/img/case04.jpg"/>\n           <article>\n           <h3>冠状动脉硬化&nbsp;&nbsp;狭窄75%</h3>\n           <dd>王先生 &nbsp;&nbsp; 年龄:24</dd>\n           </article>\n         </li>\n       </ul>\n     </section>\n\n    </div>\n\n   </div>\n\n\n   <footer>\n      <ul class="footer-con flex-box">\n      <li class="flex-cell"><a href="#/other/other~1">关于我们</a></li>\n      <li class="flex-cell"><a href="#/other/other~2">常见问题</a></li>\n      <li class="flex-cell"><a href="#/other/other~3">就医指南</a></li>\n      <li class="flex-cell"><a href="#/other/other~4">意见反馈</a></li>\n      </ul>\n      <h5>\n        @2015 法兰医疗 版权所有,未经授权禁止复制\n      </h5>\n      <section>\n        <aside>\n          <a href="tel:400-184-6606"><img src="${path}/common/img/icon-phone.png" /></a>\n          <p>\n            <strong><a href="tel:400-184-6606">400-184-6606</a></strong> <br/> 立即咨询\n          </p>\n        </aside>\n        <div class="qrcode">\n          <img src="${path}/common/img/qrcode.png" />\n          <p>\n            扫描二维码 <br/>关注我们\n          </p>\n        </div>\n      </section>\n   </footer>\n'}),define("home/indexView",["require","saber-dom","global/path","../plugin/slide/1.0/slide-img","./home.tpl"],function(require){var e=require("saber-dom"),t=(require("global/path"),require("../plugin/slide/1.0/slide-img")),n={};return n.template=require("./home.tpl"),n.className="home",n.events={ready:function(){t({wrap:document.getElementById("photo"),loop:!0,autoPlay:!0,autoTime:6e3,pagination:!0}),function(){var t=window.innerWidth/640;console.log(window.innerWidth),console.log(t);var n=400*t;n=n>400?400:n,e.query("#photo").style.height=n+"px"}()}},n}),define("home/indexModel",["require","saber-promise","global/path","global/homedata"],function(require){var e=require("saber-promise"),t={};return t.fetch=function(){var t=require("global/path"),n=require("global/homedata"),i={path:t,homeData:n};return e.resolved(i)},t}),define("home/index",["require","saber-lang/type","saber-dom","./indexView","./indexModel"],function(require){var e=(require("saber-lang/type"),require("saber-dom"),{});return e.logData={cat:"home"},e.view=require("./indexView"),e.model=require("./indexModel"),e}),define("item/item.tpl",[],function(){return'<!-- var: types = location.hash.split("~")[1]-->\n<!-- if: ${types} == 1-->\n<!-- var: headerText = "可溶解支架"-->\n<!-- /if -->\n<!-- if: ${types} == 2-->\n<!-- var: headerText = "可溶解支架"-->\n<!-- /if -->\n<!-- if: ${types} == 3-->\n<!-- var: headerText = "可溶解支架"-->\n<!-- /if -->\n<!-- if: ${types} == 4-->\n<!-- var: headerText = "可溶解支架"-->\n<!-- /if -->\n<header data-type="${types}">\n	<a href="javascript:history.back();" class="btn-back"><i class="gt-icon"></i></a>\n	<span>${headerText}</span>\n	<a href="" class="home"><i class="home-icon"></i></a>\n</header>\n<div class="region">\n	<span class="hint">全球最新一代心脏支架</span>\n	<span class="region-view">\n		<i class="current-region">就医地域：${region}</i><a href="#/detail/detail~7" style="color:#fff;">更多<i class="more-icon"></a></i>\n	</span>\n</div>\n<div class="nav">\n	<ul class="item-list">\n		<!-- if: ${types} == 1-->\n			<li class="first-item item"><a href="javascript:void(0)" class="selected">支架设计</a></li>\n		<!-- else-->\n			<li class="first-item item"><a href="#/item/item~1">支架设计</a></li>\n		<!-- /if-->\n		<!-- if: ${types} == 2-->\n			<li class="item"><a href="javascript:void(0)" class="selected">优势特点</a></li>\n		<!-- else-->\n			<li class="item"><a href="#/item/item~2">优势特点</a></li>\n		<!-- /if-->\n		<!-- if: ${types} == 3-->\n			<li class="item"><a href="javascript:void(0)" class="selected">数据对比</a></li>\n		<!-- else-->\n			<li class="item"><a href="#/item/item~3">数据对比</a></li>\n		<!-- /if-->\n		<!-- if: ${types} == 4-->\n			<li class="last-item item"><a href="javascript:void(0)" class="selected">术后变化</a></li>\n		<!-- else-->\n			<li class="last-item item"><a href="#/item/item~4">术后变化</a></li>\n		<!-- /if-->\n	</ul>\n</div>\n<div class="list-container">\n	<!-- if: ${types} == 1-->\n		<img src="${path}/common/img/design-history.jpg" alt="history">\n		<img src="${path}/common/img/design-material.jpg" alt="material">\n		<img src="${path}/common/img/design-surface.jpg" alt="surface">\n		<img src="${path}/common/img/design-composition.jpg" alt="composition">\n		<img src="${path}/common/img/design-channelling.jpg" alt="channelling">\n	<!-- elif: ${types} == 2-->\n		<div class="type2">\n			<img src="${path}/common/img/special-death.jpg" alt="" class="special-death">\n			<a href="#/detail/detail~1" class="special-death-a"></a>\n		</div>\n		<div class="type2">\n			<img src="${path}/common/img/special-attack.jpg" alt="attack" class="special-attack">\n			<a href="#/detail/detail~2" class="special-attack-a"></a>\n		</div>\n		<div class="type2">\n			<img src="${path}/common/img/special-cures.jpg" alt="cures" class="special-cures">\n			<a href="#/detail/detail~3" class="special-cures-a"></a>\n		</div>\n		<div class="type2">\n			<img src="${path}/common/img/special-resonance.jpg" alt="resonance" class="pecial-resonance">\n			<a href="#/detail/detail~4" class="pecial-resonance-a"></a>\n		</div>\n		<div class="type2">\n			<img src="${path}/common/img/special-regain.jpg" alt="regain" class="special-regain">\n			<a href="#/detail/detail~5" class="special-regain-a"></a>\n		</div>\n		<div class="type2">\n			<img src="${path}/common/img/special-affect.jpg" alt="affect" class="special-affect">\n			<a href="#/detail/detail~6" class="special-affect-a"></a>\n		</div>\n	<!-- elif: ${types} == 3-->\n		<hr style="height:1px; border:none; border-top:1px solid #e1e1e1;">\n		<div class="wrap-table">\n			<table class="contrast-table" border=0 cellspacing=5 cellpadding=0>\n				<tr>\n					<th><img src="${path}/common/img/old.jpg" alt=""></th>\n					<th><img src="${path}/common/img/new.jpg" alt=""></th>\n				</tr>\n				<tr>\n					<td><p>传统金属支架</p></td>\n					<td><p>可溶解支架</p></td>\n				</tr>\n				<tr>\n					<td>\n						<p>金属支架永久存在</p>\n						<p>终生服用阿司匹林</p>\n						<p>术后再狭窄率5%-10%</p>\n					</td>\n					<td>\n						<p>两年后完全溶解</p>\n						<p>服用阿司匹林两年</p>\n						<p>术后再狭窄率&lt;4%</p>\n					</td>\n				</tr>\n				<tr>\n					<td>\n						<p>再次放支架的难度高</p>\n						<p>受磁场影响较大</p>\n						<p>血管壁支撑力良好</p>\n					</td>\n					<td>\n						<p>不影响再次放支架</p>\n						<p>不受磁场影响</p>\n						<p>血管壁支撑力良好</p>\n					</td>\n				</tr>\n				<tr>\n					<td>\n						<p>血管功能丧失</p>\n						<p>持续血管炎症反应</p>\n						<p>异物反应较少</p>\n					</td>\n					<td>\n						<p>完全恢复血管功能</p>\n						<p>血管炎症反应小，2年后消失</p>\n						<p>异物反应极少，2年后消失</p>\n					</td>\n				</tr>\n			</table>\n		</div>\n	<!-- elif: ${types} == 4-->\n		<hr style="height:1px; border:none; border-top:1px solid #e1e1e1;">\n		<img src="${path}/common/img/three_phases.jpg">\n		<img src="${path}/common/img/constrast.jpg">\n\n	<!-- /if-->\n</div>\n\n\n\n\n<footer>\n   <ul class="footer-con flex-box">\n   <li class="flex-cell"><a href="#/other/other~1">关于我们</a></li>\n   <li class="flex-cell"><a href="#/other/other~2">常见问题</a></li>\n   <li class="flex-cell"><a href="#/other/other~3">就医指南</a></li>\n   <li class="flex-cell"><a href="#/other/other~4">意见反馈</a></li>\n   </ul>\n   <h5>\n     @2015 法兰医疗 版权所有,未经授权禁止复制\n   </h5>\n   <section>\n     <aside>\n       <a href="tel:400-184-6606"><img src="${path}/common/img/icon-phone.png" /></a>\n       <p>\n         <strong><a href="tel:400-184-6606">400-184-6606</a></strong> <br/> 立即咨询\n       </p>\n     </aside>\n     <div class="qrcode">\n       <img src="${path}/common/img/qrcode.png" />\n       <p>\n         扫描二维码 <br/>关注我们\n       </p>\n     </div>\n   </section>\n</footer>\n'}),define("item/indexView",["require","saber-dom","global/path","./item.tpl"],function(require){var e=require("saber-dom"),t=(require("global/path"),{});return t.template=require("./item.tpl"),t.events={ready:function(){(rederNav=function(){for(var t=window.innerWidth,n=(t-36-200)/3/2,i=e.queryAll(".item a"),r=i.length,o=0;r>o;o++)e.setStyle(i[o],"padding","0px "+n+"px");if("2"==e.getData(e.query("header"),"type"))for(var t=window.innerWidth,s=750,a=225,l=45,u=t/s,c=274*u,f=[256,218,216,256,258,280],p=e.queryAll(".type2 a"),o=0;o<f.length;o++)e.setStyle(p[o],"left",c+"px"),e.setStyle(p[o],"top",f[o]*u+"px"),e.setStyle(p[o],"width",a*u+"px"),e.setStyle(p[o],"height",l*u+"px")})(),window.onresize=rederNav}},t}),define("item/indexModel",["require","saber-promise","global/path","global/region"],function(require){var e=require("saber-promise"),t={};return t.fetch=function(){var t=require("global/path"),n=require("global/region"),i={path:t,region:n};return e.resolved(i)},t}),define("item/index",["require","./indexView","./indexModel"],function(require){var e={};return e.view=require("./indexView"),e.model=require("./indexModel"),e}),define("detail/detail.tpl",[],function(){return'<!-- var: types = location.hash.split("~")[1]-->\n<!-- if: ${types} == 1-->\n<!-- var: headerText = "告别终身服药"-->\n<!-- /if -->\n<!-- if: ${types} == 2-->\n<!-- var: headerText = "有效降低心绞疼发作"-->\n<!-- /if -->\n<!-- if: ${types} == 3-->\n<!-- var: headerText = "再狭窄率大幅降低"-->\n<!-- /if -->\n<!-- if: ${types} == 4-->\n<!-- var: headerText = "安心做核磁共震"-->\n<!-- /if -->\n<!-- if: ${types} == 5-->\n<!-- var: headerText = "彻底恢复血管功能"-->\n<!-- /if -->\n<!-- if: ${types} == 6-->\n<!-- var: headerText = "再手术完全无影响"-->\n<!-- /if -->\n<!-- if: ${types} == 7-->\n<!-- var: headerText = "就医地域"-->\n<!-- /if -->\n<!-- if: ${types} == 8-->\n<!-- var: headerText = "最新病例"-->\n<!-- /if -->\n<header data-type="${types}">\n	<a href="javascript:history.back();" class="btn-back"><i class="gt-icon"></i></a>\n	<span>${headerText}</span>\n	<a href="" class="home"><i class="home-icon"></i></a>\n</header>\n\n<!-- if: ${types} == 1-->\n<div class="detail1-container">\n	<div class="detail-header">\n		<h2>终生服药的痛苦</h2>\n		<ul>\n			<li>为了防止血栓，植入金属支架后医生要求终生服用抗血栓药物，比如阿司匹林。</li>\n			<li>终生服药给生活上带来极大的痛苦，身体上造成了非常大的伤害，同时经济上也是一笔不小的开支！</li>\n		</ul>\n	</div>\n	<div class="detail-container">\n		<h2>生活痛苦</h2>\n		<ul>\n			<li>每月到医院挂号、开药</li>\n			<li>每天要按时服药，不论春夏秋冬，终生成为“药罐子”</li>\n		</ul>\n		<h2>身体伤害</h2>\n		<ul>\n			<li>\n				是药三分毒，抗血栓的药自然也不例外，对身体的伤害有：\n				<div>\n					①胃肠道出血或溃疡<br>②肝肾功能损害<br>③凝血功能障碍<br>④恶心、呕吐，上腹部不适或疼痛等胃肠道症状<br>⑤皮肤过敏\n				</div>\n			</li>\n			<li>\n				不吃抗血栓的药会怎么样呢？\n				<div>\n					自然是非常容易形成血栓。<br>血栓可能发生在血管的任何地方，从而引发各类较为严重的疾病，如脑血栓（进一步可引发脑梗死）、冠脉狭窄（进一步诱发心肌梗死）以及下肢动静脉血栓或肺栓塞等。\n				</div>\n			</li>\n		</ul>\n		<h2>经济开发</h2>\n		<ul>\n			<li>为了抗血栓，降低药物副作用，对于植入金属支架的患者，医生常建议服用波利维，我们就拿这种药来为患者算笔账：</li>\n			<li style="margin-top:20px;">服药：硫酸氢氯吡格雷（波利维），137元/7片，服用30年需要20万元。</li>\n			<li>复查：心电图检查30元/次、心脏超声检查200元/次，运动平板检查200元/次，心肌核素显像检查1000元/次，冠脉CTA检查2000元/次，冠脉造影检查5000元/次。</li>\n			<li style="margin-top:20px;">植入金属支架，30年保守估计医药费在25万元人民币。</li>\n			<li>植入可溶解支架，2年后上述医药费就不再产生了。</li>\n		</ul>\n		<h2>可溶解支架，告别终生服药的痛苦！</h2>\n	</div>\n</div>\n<!-- elif: ${types} == 2-->\n<div class="detail2-container">\n	<h2>心绞痛的危害</h2>\n	<ul>\n		<li>心绞痛在生理上和心理上给患者带来极大的痛苦</li>\n		<li>严重影响患者正常的工作和生活，大大降低生活质量</li>\n		<li>明显增加就医成本：反复去医院挂号，做多项检查，服用更多的药物</li>\n	</ul>\n	<h2 class="margin-top">权威临床数据</h2>\n	<ul>\n		<li>数据表明，可溶解支架心绞痛的发生比率比传统金属支架降低36%</li>\n		<li>接受可溶解支架-Absorb治疗的患者心绞痛发生率为 16.4%</li>\n		<li>接受药物洗脱金属支架-Xience治疗的患者心绞痛发生率为 25.6%</li>\n	</ul>\n	<h2 class="margin-top">心绞痛是什么？</h2>\n	<ul>\n		<li>心绞痛是冠状动脉供血不足，心肌急剧的、暂时缺血与缺氧所引起的以发作性胸痛或胸部不适为主要表现的临床综合征。</li>\n		<li>疼痛主要位于胸骨后部，可放射至心前区与左上肢，劳动或情绪激动时常发生，每次发作持续3～5分钟，可数日一次，也可一日数次，休息或含服硝酸甘油后消失。</li>\n	</ul>\n</div>\n\n<!-- elif: ${types} == 3-->\n<div class="detail2-container">\n	<h2>再狭窄的危险</h2>\n	<ul>\n		<li>植入支架后冠脉再狭窄，会给患者会带来比较大的危险和痛苦</li>\n		<li>原位再狭窄，原金属支架无法取出或难度极高，终生滞留心血管中</li>\n		<li>可能需要搭桥手术，费用和手术难度比心脏支架均高很多</li>\n	</ul>\n	<h2 class="margin-top">权威临床数据</h2>\n	<ul>\n		<li>数据表明，可溶解支架再狭窄的发生比率比传统金属支架降低20~60%</li>\n		<li>接受可溶解支架的再狭窄发生率&lt;4%</li>\n		<li>接受药物洗脱金属支架的再狭窄发生率为 5~10%</li>\n	</ul>\n	<h2 class="margin-top">为什么会再狭窄？</h2>\n	<ul>\n		<li>传统金属支架一直滞留血管中，是人体中的异物，会持续刺激血管</li>\n		<li>支架在植入血管过程中，可能使血管内壁造成损伤上述原因导致支架植入部位的动脉内皮细胞、中膜的平滑</li>\n		<li>肌细胞容易过度增生，合并形成血栓，进而造成支架内的再狭窄</li>\n	</ul>\n</div>\n<!-- elif: ${types} == 4-->\n<div class="detail2-container">\n	<h2>为什么放完金属支架不能做磁共振？</h2>\n	<ul>\n		<li>金属在高频强磁场中，会出现发热甚至熔化</li>\n		<li>在强磁场的作用下，金属物品可能发生移动或破坏</li>\n		<li>\n			金属会影响磁场的均匀性，使图像中产生大片的无信号伪影，不利于病灶的显示\n			<div>所以，植入金属支架植入后，强烈建议不做磁共振</div>\n		</li>\n	</ul>\n	<h2 class="margin-top">磁共振检查的意义</h2>\n	<ul>\n		<li>磁共振具有无射线辐射，无损伤，组织对比分辨高，且可直接进行多方位体层扫描等优点</li>\n		<li>磁共振几乎适用于全身各系统的不同疾病，是肿瘤、神经、骨骼等多种疾病最有效的诊断方法，诊断价值不能被CT替代</li>\n	</ul>\n</div>\n\n<!-- elif: ${types} == 5-->\n<div class="detail2-container">\n	<h2>恢复血管功能的意义</h2>\n	<ul>\n		<li>金属支架植入心脏后，一直留在体内，就等于人为的破坏了一段血管的功能，血管里放的金属支架越多，影响的面积就越大</li>\n		<li>血管功能决定着人的寿命。常见的高血压、高血脂、糖尿病就是在持续影响血管的功能，当影响到一定程度，就会出现脑梗、心梗之类的重大疾病</li>\n	</ul>\n	<h2 class="margin-top">冠状动脉的功能</h2>\n	<ul>\n		<li>心脏是人体中最重要的器官，需要持续的吸收营养、消耗能量，保证不停的搏动，维持人体各组织器官正常工作</li>\n		<li>冠状动脉是供给心脏血液的动脉，是为心脏提供营养和能源的通道</li>\n		<li>冠状动脉血管功能的恢复意义就会更大。研究表明，植入可溶解支架后，两年后能够彻底恢复血管本身功能</li>\n	</ul>\n</div>\n\n\n<!-- elif: ${types} == 6-->\n<div class="detail2-container">\n	<h2>再次狭窄怎么办？</h2>\n	<ul>\n		<li>随访数据表明，植入传统金属支架再狭窄的比例约为5%~10%</li>\n		<li>一旦出现再次狭窄，若采用介入治疗，再次放支架的难度极高，即使能够再次植入，随着血管内金属架个数的增加，术后血栓风险也会大增；若进行搭桥手术，原金属支架位置是不能手术的，需绕过原支架位置延长搭桥血管长度</li>\n		<li style="margin-top:20px;">随访数据表明，植入可溶解支架再狭窄比例大幅下降到4%以下</li>\n		<li>2年后支架完全溶解，即使出现再狭窄，血管已经恢复到第一次手术前的状态，再进行任何操作，与第一次手术难度没有差别</li>\n	</ul>\n</div>\n<!-- elif: ${types} == 7-->\n<img src="${path}/common/img/area_banner.jpg" style="width:100%;">\n<div class="area-container">\n	<h2>转诊医院<span>&nbsp;&nbsp;Referral hospital</span></h2>\n	<table id="hospital-table" class="hospital-table" border=0 cellspacing=0 cellpadding=0>\n		<tr valign="top">\n			<td>\n				<img src="${path}/common/img/about_asia_2.jpg" alt="">\n				<p>新加坡伊丽莎白诺维娜医院</p>\n				<ul>\n					<li>新加坡的医疗水平在世界卫生组织排名，亚洲第一</li>\n					<li>亚洲第一个通过国际联合委员会认证的医院，代表了全世界最高的医疗服务标准</li>\n				</ul>\n			</td>\n			<td></td>\n			<td>\n				<img src="${path}/common/img/about_europe_1.jpg" alt="">\n				<p>英国皇家布朗普顿医院</p>\n				<ul>\n					<li>英国及欧洲最大的心肺中心之一</li>\n					<li>每年发表科学文章五、六百篇2006年有10大研究项目获得了好评</li>\n				</ul>\n			</td>\n		</tr>\n	</table>\n	<h2>就医信息<span>&nbsp;&nbsp;Medical information</span></h2>\n	<table id="medical-info" class="medical-info" cellspacing=1 cellpadding=0>\n		<tr>\n			<th>新加坡伊丽莎白诺维娜医院</th>\n			<th>英国皇家布朗普顿医院</th>\n		</tr>\n		<tr>\n			<td>前往新加坡就医</td>\n			<td>前往伦敦切尔西就医</td>\n		</tr>\n		<tr>\n			<td>单个支架治疗费用约10万元人民币<br>增加一个支架约3~4万元人民币<br>治疗周期约为3~5天<br>每两人每周生活费用约2~3万</td>\n			<td>单个支架治疗费用约18万元人民币<br>增加一个支架约4~5万元人民币<br>治疗周期约为5~7天<br>每两人每周生活费用约5~8万</td>\n		</tr>\n		<tr>\n			<td>预约仅需提前1~2周<br>办理签证仅需3~5个工作日<br>无时差</td>\n			<td>预约需提前3~4周<br>办理签证需21天左右<br>8小时时差</td>\n		</tr>\n		<tr>\n			<td>飞行时间、票价及航班：<br>北京最快6小时5分钟<br>深圳最快3小时45分钟<br>其他地域航班、飞行时间及预估机票费用如下：</td>\n			<td>飞行时间、票价及航班：<br>北京最快10小时35分钟<br>其他地域航班、飞行时间及预估机票费用如下：</td>\n		</tr>\n		<tr>\n			<td>\n				北京<span class="arrow-up">收起详情<i></i></span><br>\n				<div class="time-info">\n					飞行时间：6:05-6:20<br>\n					票价区间：4000-5000<br>\n					可选航班：<br>\n					CA969、CA975、CA629、\n					SQ807、SQ801、SQ805\n				</div>\n			</td>\n			<td>\n				北京<span class="arrow-up">收起详情<i></i></span><br>\n				<div class="time-info">\n					飞行时间：10:35-11:15<br>\n					票价区间：9800-15000<br>\n					可选航班：<br>\n					CA937、CA855、BA038\n				</div>\n			</td>\n		</tr>\n		<tr>\n			<td>\n				上海<span class="arrow-down">展开详情<i></i></span><br>\n				<div class="time-info">\n				</div>\n			</td>\n			<td></td>\n		</tr>\n	</table>\n</div>\n<!-- elif: ${types} == 8-->\n<div class="case-container">\n	<img src="${path}/common/img/case_1.jpg">\n	<h2>可溶解支架，让我不用做“钢铁侠”</h2>\n	<p>化名：王先生</p>\n	<p>年龄：46岁</p>\n	<p>职业：外企高层管理者</p>\n	<p>病变：前降支70%狭窄</p>\n	<p>治疗：1枚可溶解支架</p>\n	<p>就诊：新加坡伊丽莎白诺维娜医院</p>\n	<p>就医时间：2015年10月</p>\n	<hr>\n	<img src="${path}/common/img/case_2.jpg">\n	<h2>可溶解支架，让我不用做“钢铁侠”</h2>\n	<p>化名：李先生</p>\n	<p>年龄：53岁</p>\n	<p>职业：私营业主</p>\n	<p>病变：前降支80%狭窄、回旋支85%狭窄</p>\n	<p>治疗：3枚可溶解支架</p>\n	<p>就诊：新加坡伊丽莎白诺维娜医院</p>\n	<p>就医时间：2015年9月</p>\n	<hr>\n	<img src="${path}/common/img/case_3.jpg">\n	<h2>让心里的“钉子”不再增加</h2>\n	<p>化名：杨先生</p>\n	<p>年龄：60岁</p>\n	<p>职业：国家机关干部</p>\n	<p>病变：已放3枚支架，前降支再次狭窄90%</p>\n	<p>治疗：1枚可溶解支架</p>\n	<p>就诊：新加坡伊丽莎白诺维娜医院</p>\n	<p>就医时间：2015年9月</p>\n	<hr>\n	<img src="${path}/common/img/case_4.jpg">\n	<h2>“更年期”症状，也可以手术治好</h2>\n	<p>化名：夏女士</p>\n	<p>年龄：55岁</p>\n	<p>职业：内科医生</p>\n	<p>病变：前降支80%狭窄，第一对角支60%狭窄</p>\n	<p>治疗：1枚可溶解支架，药物球囊扩张</p>\n	<p>就诊：新加坡伊丽莎白诺维娜医院</p>\n	<p>就医时间：2015年9月</p>\n</div>\n<!-- /if-->\n\n\n<hr style="height:1px; border:none; border-top:1px solid #e1e1e1;">\n<footer>\n   <ul class="footer-con flex-box">\n   <li class="flex-cell"><a href="#/other/other~1">关于我们</a></li>\n   <li class="flex-cell"><a href="#/other/other~2">常见问题</a></li>\n   <li class="flex-cell"><a href="#/other/other~3">就医指南</a></li>\n   <li class="flex-cell"><a href="#/other/other~4">意见反馈</a></li>\n   </ul>\n   <h5>\n     @2015 法兰医疗 版权所有,未经授权禁止复制\n   </h5>\n   <section>\n	 <aside>\n		 <a href="tel:400-184-6606"><img src="${path}/common/img/icon-phone.png" /></a>\n		 <p>\n			 <strong><a href="tel:400-184-6606">400-184-6606</a></strong> <br/> 立即咨询\n		 </p>\n	 </aside>\n     <div class="qrcode">\n       <img src="${path}/common/img/qrcode.png" />\n       <p>\n         扫描二维码 <br/>关注我们\n       </p>\n     </div>\n   </section>\n</footer>\n'}),define("detail/detailView",["require","saber-dom","global/path","./detail.tpl"],function(require){var e=require("saber-dom"),t=(require("global/path"),{});return t.template=require("./detail.tpl"),t.events={ready:function(){(rederNav=function(){for(var t=window.innerWidth,n=(t-36-200)/3/2,i=e.queryAll(".item a"),r=i.length,o=0;r>o;o++)e.setStyle(i[o],"padding","0px "+n+"px");if("7"==e.getData(e.query("header"),"type")){var s=e.queryAll("#hospital-table td"),a=Math.round((t-16-12)/2);e.setStyle(s[0],"width",a+"px"),e.setStyle(s[2],"width",a+"px")}})(),window.onresize=rederNav}},t.domEvents={"click: .arrow-up, .arrow-down":function(e){if("arrow-down"==e.className)e.className="arrow-up",e.innerHTML="收起详情<i></i>",e.parentNode.getElementsByClassName("time-info")[0].style.display="block";else e.className="arrow-down",e.innerHTML="展开详情<i></i>",e.parentNode.getElementsByClassName("time-info")[0].style.display="none"}},t}),define("detail/detailModel",["require","saber-promise","global/path","global/region"],function(require){var e=require("saber-promise"),t={};return t.fetch=function(){var t=require("global/path"),n=require("global/region"),i={path:t,region:n};return e.resolved(i)},t}),define("detail/detail",["require","./detailView","./detailModel"],function(require){var e={};return e.view=require("./detailView"),e.model=require("./detailModel"),e}),define("other/other.tpl",[],function(){return'<!-- var: types = location.hash.split("~")[1]-->\n<!-- if: ${types} == 1-->\n<!-- var: headerText = "关于法兰医疗"-->\n<!-- /if -->\n<!-- if: ${types} == 2-->\n<!-- var: headerText = "常见问题"-->\n<!-- /if -->\n<!-- if: ${types} == 3-->\n<!-- var: headerText = "就医指南"-->\n<!-- /if -->\n<!-- if: ${types} == 4-->\n<!-- var: headerText = "意见反馈"-->\n<!-- /if -->\n<header data-type="${types}">\n	<a href="javascript:history.back();" class="btn-back"><i class="gt-icon"></i></a>\n	<span>${headerText}</span>\n	<a href="" class="home"><i class="home-icon"></i></a>\n</header>\n<!-- if:${types} == 1-->\n<div class="about-container">\n	<img src="${path}/common/img/about_header.jpg">\n	<div class="wrap-text">\n		<h1>法兰医疗（ falanmed.com ）</h1>\n		<h2>公司介绍 <span>Company</span></h2>\n		<p>法兰医疗是中国领先的精准医疗服务平台，根据客户需求在全球范围内寻找最匹配医疗方案。公司总部位于北京，在巴黎、首尔、休斯顿、新加坡、东京设有服务中心。</p>\n		<p>法兰医疗致力于打破医疗信息、语言及地域的藩篱，通过科技来改变人们的就医方式，促进全球医疗资源平等化、便捷化，使每个人都能自由获取全球最新医疗信息，平等地获取全球最先进的医疗照护。</p>\n		<p>法兰医疗通过技术平台有效匹配国内外患者的医疗服务需求和医疗资源。对患者而言，法兰医疗通过网站及移动端的全平台覆盖，随时随地为其提供国内外专家预约、就医陪诊、健康体检、会员健康管理等多种医疗健康服务，帮助患者快捷找到最佳诊疗及健康方案。</p>\n		<p>法兰医疗拥有全职医生团队及专业的国际医疗转诊团队。只需要简单三步，就可以让患者获得轻松、安心、精准的医疗服务。</p>\n		<h2>公司业务 <span>Company business</span></h2>\n		<ul class="service-list">\n			<li>出国看病全程管理</li>\n			<li>免费医疗方案咨询</li>\n			<li>医疗青春项目</li>\n			<li>国内就医安排</li>\n			<li>客户疾病学术研究与文献搜集</li>\n			<li>遗传背景和生活方式下的个性化体验安排</li>\n		</ul>\n	</div>\n	<img src="${path}/common/img/about_resourse_fenbu.jpg">\n	<div class="wrap-text">\n		<h2>部分顶级合作医院 <span>Part of the top cooperative hospital</span></h2>\n		<h1>亚太医疗资源</h1>\n		<ul class="resource-list">\n			<li><img src="${path}/common/img/about_asia_1.jpg" alt=""><p>国内20家顶级三甲医院</p></li>\n			<li><img src="${path}/common/img/about_asia_2.jpg" alt=""><p>新加坡伊丽莎白诺维娜医院</p></li>\n			<li><img src="${path}/common/img/about_asia_3.jpg" alt=""><p>日本30余家综合医院</p></li>\n			<li><img src="${path}/common/img/about_asia_4.jpg" alt=""><p>韩国首尔峨山医院</p></li>\n		</ul>\n		<h1>欧洲医疗资源</h1>\n		<ul class="resource-list">\n			<li><img src="${path}/common/img/about_europe_1.jpg" alt=""><p>英国皇家布朗顿医院</p></li>\n			<li><img src="${path}/common/img/about_europe_2.jpg" alt=""><p>法国巴黎乔治蓬皮杜医院</p></li>\n			<li><img src="${path}/common/img/about_europe_3.jpg" alt=""><p>德国海德堡大学附属医院</p></li>\n			<li><img src="${path}/common/img/about_europe_4.jpg" alt=""><p>法国巴黎儿童医院</p></li>\n		</ul>\n		<h1>美国医疗资源</h1>\n		<ul class="resource-list">\n			<li><img src="${path}/common/img/about_us_1.jpg" alt=""><p>美国约翰霍普金斯医院</p></li>\n			<li><img src="${path}/common/img/about_us_2.jpg" alt=""><p>美国梅奥医院</p></li>\n			<li><img src="${path}/common/img/about_us_3.jpg" alt=""><p>美国MD.Anderson医院</p></li>\n			<li><img src="${path}/common/img/about_us_4.jpg" alt=""><p>美国克利夫兰医院</p></li>\n		</ul>\n	</div>\n</div>\n<!-- elif:${types} == 2-->\n<img src="${path}/common/img/question_header.jpg" style="width:100%;">\n<div class="question-container">\n	<h2>Q1：什么样的病人适合做可溶解支架？</h2>\n	<p>A：由于需要出国就医，不适合急性心肌梗死的病人；其他病人，只要心脏血管狭窄达到放支架标准（狭窄超过70%），基本都可以放可溶解支架。出国就医前会有手术医生进行更精确的评估。</p>\n	<h2>Q2：放了金属支架，可不可以不吃药？</h2>\n	<p>A：医生不建议自行停服阿司匹林等抗血栓药物，停药后血栓形成的几率会明显升高。血栓可以发生在血管的任何地方，血栓随着血液流动，如果在脑动脉血管中停留，阻碍了脑动脉正常血液的流通就是脑血栓；若堵塞了心脏的血管，则会出现心肌梗塞。此外，还有下肢动脉血栓下肢深静脉血栓及肺栓塞等。</p>\n	<h2>Q3：吃阿司匹林到底危害有多大？</h2>\n	<p>A：长期服用阿司匹林，会出现的副作用有<br>①恶心、呕吐，上腹部不适或疼痛等胃肠道症状<br>②胃肠道出血或溃疡<br>③皮肤过敏反应<br>④肝肾功能损害<br>⑤出凝血功能障碍</p>\n	<h2>Q4：放金属支架为什么需要终生服药？</h2>\n	<p>A：金属支架在放置过程中，对血管内壁造成损伤，从而激活了凝血功能，更容易形成血栓。金属支架放进血管后，会对血管产生持续刺激，血管内壁也容易形成血栓。阿司匹林是一种抗血小板聚集的药物，在一定程度上减少血栓的形成。</p>\n	<h2>Q5：对于已经放过支架的病人，可溶解支架还有好处吗？</h2>\n	<p>A：对于体内已经有金属支架的病人，如果血管再次狭窄，由于可溶解支架的特性，2年后不会使血管内的支架再增多。支架越多，血管发生再次堵塞的几率越大。</p>\n	<h2>Q6：国内医生对血管狭窄的评估跟国外医生不同怎么办？</h2>\n	<p>A：国外医生对病人心脏血管的评估是通过国内客观的影像学结果判断的，这种影像包括冠状动脉CTA和冠状动脉造影。提供清晰的影像资料，国外医生会根据影像资料做出最准确的判断。</p>\n	<h2>Q7： 已放过好几个支架，现在又出现不适症状，是放支架还是搭桥？</h2>\n	<p>A：首先要明确目前的血管情况，现在的症状与血管狭窄有没有关系，最好做冠脉造影；冠脉CTA对于已放过金属支架的患者，支架内的情况不能清楚的看到。医生会根据造影的结果，评判适合放支架还是搭桥手术。</p>\n	<h2>Q8：已经做过冠脉搭桥手术，如果血管再次狭窄，应该怎么办？</h2>\n	<p>A：不建议再次搭桥，二次开胸手术的风险很大，搭桥手术后胸腔的筋膜有粘连，再次处理容易损伤搭桥的血管。若血管再次狭窄，建议做支架手术，可以处理原本狭窄的血管，也可以处理搭桥血管。处理静脉桥血管需要用金属支架，因为静脉血管较粗大，可降解支架没有相应的型号；处理动脉桥血管和原动脉血管都可以用生物可降解支架。</p>\n	<h2>Q9：为什么放完支架不能做核磁共振？</h2>\n	<p>A：主要有三点原因：<br>①金属会影响磁场的均匀性，使图像中产生大片的无信号伪影，不利于病灶的显示<br>②在强磁场的作用下，金属物品可能发生移动或破坏<br>③金属在高频强磁场中，会出现发热甚至熔化。</p>\n	<h2>Q10：可溶解支架，为什么需要2年才溶解完？</h2>\n	<p>A：支架在植入血管后6个月左右，病变的血管完成了重构，也就是说血管的形状已经固定，这时支架就失去了支撑血管的意义，支架还放在血管内只能增加再次狭窄的几率。可溶解支架放入血管后，会逐渐变成水和二氧化碳，通过呼吸道、排泄物及汗液排出体外。溶解的过程过快，会稍微对血管有刺激，2年的溶解期，对血管就没有什么伤害了。</p>\n</div>\n<!-- elif:${types} == 3-->\n<img src="${path}/common/img/manual_header.jpg" style="width:100%;">\n<div class="manual-container">\n	<table border=0 cellspacing=18 cellpadding=0>\n		<tr valign="top">\n			<td><span class="call"></span></td>\n			<td style="padding-bottom:10px;">\n				<h2>致电咨询</h2>\n				<ul>\n					<li>致电400-184-6606，医疗顾问了解病情并收集资料</li>\n					<li>医疗专家根据病历资料，进行初步评估</li>\n					<li>手术医生确定是否适合治疗，并拟定治疗方案</li>\n				</ul>\n			</td>\n		</tr>\n		<tr valign="top">\n			<td><span class="calen"></span></td>\n			<td style="padding-bottom:43px;">\n				<h2>确定行程</h2>\n				<ul>\n					<li>根据病情，确定出行时间</li>\n					<li>办理签证，预订机票及酒店</li>\n					<li>确定医疗行程</li>\n				</ul>\n			</td>\n		</tr>\n		<tr valign="top">\n			<td><span class="airplane"></span></td>\n			<td style="padding-bottom:34px;">\n				<h2>出国就医</h2>\n				<ul>\n					<li>手术医生明确病情，进行术前准备</li>\n					<li>医生进行手术，术后休养并观察</li>\n					<li>制定服药方案，提供诊疗记录</li>\n				</ul>\n			</td>\n		</tr>\n	</table>\n</div>\n\n<!-- elif:${types} == 4-->\n<div class="feedback-container">\n	<input type="text" placeholder="请输入您的姓名">\n	<input type="text" placeholder="请输入您的电话号码">\n	<textarea placeholder="请输入您的意见"></textarea>\n	<input type="button" value="提交问题">\n</div>\n<!-- /if-->\n\n<hr style="height:1px; border:none; border-top:1px solid #e1e1e1;">\n<footer>\n   <ul class="footer-con flex-box">\n   <li class="flex-cell"><a href="#/other/other~1">关于我们</a></li>\n   <li class="flex-cell"><a href="#/other/other~2">常见问题</a></li>\n   <li class="flex-cell"><a href="#/other/other~3">就医指南</a></li>\n   <li class="flex-cell"><a href="#/other/other~4">意见反馈</a></li>\n   </ul>\n   <h5>\n     @2015 法兰医疗 版权所有,未经授权禁止复制\n   </h5>\n   <section>\n	 <aside>\n		 <a href="tel:400-184-6606"><img src="${path}/common/img/icon-phone.png" /></a>\n		 <p>\n			 <strong><a href="tel:400-184-6606">400-184-6606</a></strong> <br/> 立即咨询\n		 </p>\n	 </aside>\n     <div class="qrcode">\n       <img src="${path}/common/img/qrcode.png" />\n       <p>\n         扫描二维码 <br/>关注我们\n       </p>\n     </div>\n   </section>\n</footer>\n'}),define("other/otherView",["require","saber-dom","global/path","./other.tpl"],function(require){var e=require("saber-dom"),t=(require("global/path"),{});return t.template=require("./other.tpl"),t.events={ready:function(){(rederNav=function(){for(var t=window.innerWidth,n=(t-36-200)/3/2,i=e.queryAll(".item a"),r=i.length,o=0;r>o;o++)e.setStyle(i[o],"padding","0px "+n+"px")})(),window.onresize=rederNav}},t}),define("other/otherModel",["require","saber-promise","global/path"],function(require){var e=require("saber-promise"),t={};return t.fetch=function(){var t=require("global/path"),n={path:t};return e.resolved(n)},t}),define("other/other",["require","./otherView","./otherModel"],function(require){var e={};return e.view=require("./otherView"),e.model=require("./otherModel"),e}),define("config",["require","./home/index","./item/index","./detail/detail","./other/other"],function(require){return[{path:"/home/index",action:require("./home/index")},{path:"/item/item",action:require("./item/index")},{path:"/detail/detail",action:require("./detail/detail")},{path:"/other/other",action:require("./other/other")}]}),define("app",["require","saber-promise","saber-firework","./config"],function(require){var e=require("saber-promise"),t=require("saber-firework");e.disableExceptionCapture();var n={path:"/home/",index:"index"};return t.load(require("./config")),{init:function(){t.start("viewport",n)}}});