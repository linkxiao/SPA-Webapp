!function(e,t,n){var i=n(e,t);e.util=e.util||{},e.util.toucher=e.util.toucher||i,e.define&&define("plugin/touch/1.0/toucher",["require","exports","module"],function(){return i})}(this,document,function(){function e(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function t(t,i){if(this._events=this._events||{},this._events[t])for(var r=this._events[t],o=i.target;;){if(0==r.length)return;if(o==this.dom||!o){for(var s=0,a=r.length;a>s;s++){var l=r[s].className,u=r[s].fn;if(null==l)n(t,u,o,i)}return}var c=r;r=[];for(var s=0,a=c.length;a>s;s++){var l=c[s].className,u=c[s].fn;if(e(o,l)){if(0==n(t,u,o,i))return}else r.push(c[s])}o=o.parentNode}}function n(e,t,n,i){var r=i.plugTouches||i.touches,o=r.length?r[0]:{},s={type:e,target:i.target,pageX:o.pageX,pageY:o.pageY,clientX:o.clientX||0,clientY:o.clientY||0};if(e.match(/^swipe/)&&i.plugStartPosition)s.startX=i.plugStartPosition.pageX,s.startY=i.plugStartPosition.pageY,s.moveX=s.pageX-s.startX,s.moveY=s.pageY-s.startY;var a=t.call(n,s);if(0==a)i.preventDefault(),i.stopPropagation();return a}function i(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function r(e){function n(){v=!1,clearTimeout(h),clearTimeout(p)}function r(){n(),t.call(d,"singleTap",y)}function o(e){y=e,l=e.touches[0].pageX,u=e.touches[0].pageY,c=0,f=0,v=!0,m=new Date,t.call(d,"swipeStart",e),clearTimeout(h),h=setTimeout(function(){n(e),t.call(d,"longTap",e)},500)}function s(e){if(e.plugStartPosition=y.plugStartPosition,e.plugTouches=y.touches,t.call(d,"swipeEnd",e),v){var i=new Date;if(!d._events.doubleTap||0==d._events.doubleTap.length)r();else if(i-g>200)p=setTimeout(r,190);else clearTimeout(p),n(e),t.call(d,"doubleTap",y);g=i}}function a(e){if(y=e,e.plugStartPosition={pageX:l,pageY:u},t.call(d,"swipe",e),v){if(c=e.touches[0].pageX,f=e.touches[0].pageY,Math.abs(l-c)>2||Math.abs(u-f)>2){var o=i(l,c,u,f);t.call(d,"swipe"+o,e)}else r();n(e)}}var l,u,c,f,p,h,d=this,m=0,g=0,v=!1,y=null;e.addEventListener("touchstart",o),e.addEventListener("MSPointerDown",o),e.addEventListener("pointerdown",o),e.addEventListener("touchend",s),e.addEventListener("MSPointerUp",s),e.addEventListener("pointerup",s),e.addEventListener("touchmove",a),e.addEventListener("MSPointerMove",a),e.addEventListener("pointermove",a),e.addEventListener("touchcancel",n),e.addEventListener("MSPointerCancel",n),e.addEventListener("pointercancel",n)}function o(e,t){this.dom=e,this._events={},r.call(this,this.dom)}return o.prototype.on=function(e,t,n){var i,r;if("string"==typeof t)i=t.replace(/^\./,""),r=n;else i=null,r=t;if("function"==typeof r&&e&&e.length)for(var o=e.split(/\s+/),s=0,a=o.length;a>s;s++){var l=o[s];if(!this._events[l])this._events[l]=[];this._events[l].push({className:i,fn:r})}return this},function(e){return new o(e)}});