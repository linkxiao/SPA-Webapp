define("saber-mm/AbstractView",["require","exports","module","saber-lang","etpl","./Abstract"],function(require,exports,module){function e(e,t){if(Array.isArray(t))t=t.join("");var r=n({},e.templateConfig||{}),o={};if(r.filters)o=r.filters,delete r.filters;var s=new i.Engine(r);Object.keys(o).forEach(function(e){s.addFilter(e,o[e])});var a=s.compile(t);if(!a)throw new Error("compile template fail");var u=s.render;e.template=s,e.template.render=function(t,r){r=n({},e.templateData,r);var i="";if(arguments.length<2||!t)i=a(t||r);else i=u.call(this,t,r);return i}}function t(e){e=e||{},o.call(this,e),this.init(),e.template=this.template}var r=require("saber-lang").inherits,n=require("saber-lang").extend,i=require("etpl"),o=require("./Abstract");r(t,o),t.prototype.init=function(){if(this.template=this.template||"",Array.isArray(this.template)||"string"==typeof this.template)e(this,this.template);this.bindElements=[],o.prototype.init.call(this)},t.prototype.set=function(e){this.main=e},t.prototype.render=function(e){if(this.main){var t=this.main.className.split(/\s+/);if(this.className&&t.indexOf(this.className)<0)this.main.className+=" "+this.className;this.emit("beforerender",e),this.main.innerHTML=this.template.render(this.templateMainTarget,e),this.emit("afterrender",e)}},t.prototype.ready=function(){this.emit("ready")},t.prototype.revived=function(){this.emit("revived")},t.prototype.leave=function(){this.emit("leave")},t.prototype.sleep=function(){this.emit("sleep")},module.exports=t});