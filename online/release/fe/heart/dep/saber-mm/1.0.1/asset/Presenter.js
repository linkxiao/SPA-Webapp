define("saber-mm/Presenter",["require","exports","module","saber-lang","./Abstract","saber-promise","./View","./Model"],function(require,exports,module){function e(e){n.call(this,e),this.init()}var t=require("saber-lang").inherits,r=require("saber-lang").extend,n=require("./Abstract"),i=require("saber-promise"),o=require("./View"),s=require("./Model");t(e,n),e.prototype.init=function(){var e;if(this.view&&this.view.constructor!==Object)e=this.view.constructor;else e=o;if(this.view=new e(this.view),this.model&&this.model.constructor!==Object)e=this.model.constructor;else e=s;this.model=new e(this.model),n.prototype.init.call(this)},e.prototype.set=function(e){this.path=e},e.prototype.redirect=function(e,t,r){this.router.redirect(e,t,r)},e.prototype.enter=function(e,t,n,i){this.path=t,this.options=r({},i),this.view.set(e),this.emit("enter");var o=this;return this.model.fetch(n).then(function(e){o.view.render(e)})},e.prototype.wakeup=function(e,t,n){return this.path=e,this.options=r({},n),this.emit("wakeup"),i.resolved()},e.prototype.ready=function(){this.emit("ready"),this.view.ready()},e.prototype.revived=function(){this.emit("revived"),this.view.revived()},e.prototype.complete=function(){this.emit("complete")},e.prototype.leave=function(){this.emit("leave"),this.view.leave(),this.dispose()},e.prototype.sleep=function(){this.emit("sleep"),this.view.sleep()},e.prototype.dispose=function(){this.view.dispose(),this.model.dispose(),n.prototype.dispose.call(this)},module.exports=e});