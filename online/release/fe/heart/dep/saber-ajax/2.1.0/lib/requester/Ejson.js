function Ejson(t,e){Requester.call(this,t,e)}var util=require("../util"),inherits=require("saber-lang").inherits,Requester=require("./Requester"),ERROR={DATA:-1,ABORT:-2,TIMEOUT:-3,ERROR:-500};inherits(Ejson,Requester),Ejson.prototype.handle=function(t,e,n){this.res=e;var r=this.resolver;if(!t){var i=e.status;if(i>=200&&300>i||304===i)try{if(e=JSON.parse(n),!e.status)r.fulfill(e.data);else r.reject(e)}catch(o){r.reject({status:ERROR.DATA,statusInfo:n})}else r.reject({status:-1*i})}else if(util.isString(t))r.reject({status:ERROR[t.toUpperCase()]||ERROR.ERROR});else r.reject({status:ERROR.ERROR,statusInfo:t})},Ejson.ERROR=ERROR,module.exports=Ejson;