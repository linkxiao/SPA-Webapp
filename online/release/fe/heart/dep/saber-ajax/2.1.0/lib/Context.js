function Context(t){Abstract.call(this,t)}var Abstract=require("./AbstractContext"),inherits=require("saber-lang").inherits;inherits(Context,Abstract),Context.prototype.rebas=function(t,e){function n(t){return t=t.toLowerCase().replace(/-(.)?/g,function(t,e){return"-"+e.toUpperCase()}),t.charAt(0).toUpperCase()+t.substring(1)}function r(t){var e={};return Object.keys(t).forEach(function(r){e[n(r)]=t[r]}),e}function i(n){var i=r(n.res.headers),o=n.ctx;if(t.revertContext(o)){var s=o.res;e.forEach(function(t){if(i[t])s.set(t,i[t])})}n.ctx=o=null}var o=this;o.config({logger:t.logger}),e=(e||[]).map(function(t){return n(t)}),o.on("success",i),o.on("fail",i),o.on("before",function(n,i){var o=t.getContext();if(o){var s=r(i.headers||{}),a=r(o.req.headers);e.forEach(function(t){if(a[t])s[t]=a[t]}),i.headers=s,n.ctx=o}})},module.exports=Context;